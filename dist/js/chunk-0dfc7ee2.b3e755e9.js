(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0dfc7ee2"],{"0093":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[i("div",{staticClass:"shelf-title-wrapper",class:{"hide-shadow":t.ifHideShadow}},[i("div",{staticClass:"title"},[i("span",{staticClass:"title-text"},[t._v(t._s(t.title))]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.isEditMode,expression:"isEditMode"}],staticClass:"sub-title-text"},[t._v(t._s(t.selectedText))])]),t.ifGroupEmpty||t.isDataEmpty?t._e():i("div",{staticClass:"btn-text-wrapper",on:{click:t.onEditClick}},[i("span",{staticClass:"btn-text"},[t._v(t._s(t.isEditMode?t.$t("shelf.cancel"):t.$t("shelf.edit")))])]),t.ifGroupEmpty&&!t.isDataEmpty?i("div",{staticClass:"btn-text-wrapper",on:{click:t.changeGroup}},[i("span",{staticClass:"btn-text"},[t._v(t._s(t.$t("shelf.editGroup")))])]):t._e(),t.isDataEmpty?i("div",{staticClass:"btn-text-wrapper",on:{click:t.changeLanguage}},[i("span",{staticClass:"btn-text"},[t._v(t._s(t.$t("shelf.changeLanguage")))])]):t._e(),t.ifShowClear&&!t.isDataEmpty?i("div",{staticClass:"btn-clear-wrapper",on:{click:t.clearCache}},[i("span",{staticClass:"btn-clear"},[t._v(t._s(t.$t("shelf.clearCache")))])]):t._e(),t.ifShowBack&&!t.isEditMode?i("div",{staticClass:"btn-back-wrapper",on:{click:t.back}},[i("span",{staticClass:"icon-back"})]):t._e(),t.ifShowBack&&t.isEditMode?i("div",{staticClass:"btn-back-wrapper",on:{click:t.changeGroup}},[i("span",{staticClass:"btn-text"},[t._v(t._s(t.$t("shelf.editGroup")))])]):t._e(),i("popup",{ref:"popup",attrs:{title:t.popupTitle,thirdText:t.thirdText,confirmText:t.confirmText,isRemoveText:!0,cancelText:t.$t("shelf.cancel")},on:{confirm:t.onPopupDelete,third:t.onPopupChange}}),i("shelf-group-dialog",{ref:"groupDialog",attrs:{visible:t.ifGroupDialogShow,isEditGroupName:!0,category:t.category},on:{"update:visible":function(e){t.ifGroupDialogShow=e},editGroupName:t.editGroupName}})],1)])},s=[],a=(i("4de4"),i("ac1f"),i("5319"),i("8663")),n=i("3fbb"),r=i("5de6"),c={components:{ShelfGroupDialog:n["a"],Popup:a["a"]},props:{isEditMode:Boolean,ifShowBack:Boolean,ifShowClear:Boolean,ifGroupEmpty:Boolean,data:Array,title:String,category:Object},computed:{isDataEmpty:function(){return!this.data||0===this.data.filter((function(t){return 3!==t.type})).length},selectedText:function(){return 0===this.selectedNumber?this.$t("shelf.selectBook"):1===this.selectedNumber?this.$t("shelf.haveSelectedBook").replace("$1",this.selectedNumber):this.$t("shelf.haveSelectedBooks").replace("$1",this.selectedNumber)},selectedNumber:function(){return this.category&&this.category.itemList?this.category.itemList.filter((function(t){return t.selected})).length:this.data?this.data.filter((function(t){return t.selected})).length:0},thirdText:function(){return this.isDeleteGroup?"":this.$t("shelf.editGroupName")},popupTitle:function(){return this.isDeleteGroup?this.$t("shelf.deleteGroupTitle"):""},confirmText:function(){return this.isDeleteGroup?this.$t("shelf.confirm"):this.$t("shelf.deleteGroup")}},data:function(){return{ifHideShadow:!0,ifGroupDialogShow:!1,isDeleteGroup:!1}},methods:{changeLanguage:function(){Object(r["n"])(this)},editGroupName:function(t,e){this.$emit("editGroupName",t,e)},showPopup:function(){this.$refs.popup.show()},onPopupDelete:function(){var t=this;this.isDeleteGroup?(this.$emit("deleteGroup",this.category),this.isDeleteGroup=!1):(this.$refs.popup.hide(),setTimeout((function(){t.isDeleteGroup=!0,t.$refs.popup.show()}),200))},onPopupChange:function(){this.ifGroupDialogShow=!0,this.$refs.groupDialog.showEditGroupDialog()},changeGroup:function(){this.showPopup()},back:function(){this.$router.go(-1)},clearCache:function(){this.$emit("clearCache")},showShadow:function(){this.ifHideShadow=!1},hideShadow:function(){this.ifHideShadow=!0},onEditClick:function(){this.isEditMode?this.$emit("onEditClick",!1):this.$emit("onEditClick",!0)}}},l=c,h=(i("e5b5"),i("2877")),u=Object(h["a"])(l,o,s,!1,null,"38787b2e",null);e["a"]=u.exports},"14b3":function(t,e,i){},"1da1":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));i("d3b7");function o(t,e,i,o,s,a,n){try{var r=t[a](n),c=r.value}catch(l){return void i(l)}r.done?e(c):Promise.resolve(c).then(o,s)}function s(t){return function(){var e=this,i=arguments;return new Promise((function(s,a){var n=t.apply(e,i);function r(t){o(n,s,a,r,c,"next",t)}function c(t){o(n,s,a,r,c,"throw",t)}r(void 0)}))}}},"27f0":function(t,e,i){"use strict";i("ba26")},2909:function(t,e,i){"use strict";function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function s(t){if(Array.isArray(t))return o(t)}i.d(e,"a",(function(){return c}));i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("a630");function a(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}i("fb6a"),i("b0c0");function n(t,e){if(t){if("string"===typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(t,e):void 0}}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return s(t)||a(t)||n(t)||r()}},"2c89":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"book-shelf-wrapper"},[0===t.showType||1===t.showType?i("transition-group",{attrs:{name:"list",tag:"div",id:"book-shelf-list"}},t._l(t.bookData,(function(e,o){return i("div",{key:e.id,staticClass:"book-shelf-item",on:{click:function(i){return t.onBookClick(e,o)}}},[i("div",{ref:"bookImg",refInFor:!0,staticClass:"book-img-wrapper",class:{"add-book":3===e.type,"category-book":2===e.type}},[1===e.type?i("shelf-image",{attrs:{data:e,isEditMode:t.isEditMode}}):2===e.type?i("shelf-category",{attrs:{data:e,isEditMode:t.isEditMode}}):i("span",{staticClass:"icon-add icon"})],1),i("div",{staticClass:"book-title-wrapper"},[i("span",{staticClass:"book-title title-small"},[t._v(t._s(e.title))])])])})),0):t._e(),2===t.showType||3===t.showType?i("div",{staticClass:"book-shelf-label-list-wrapper"},t._l(t.purchaseData,(function(e,o){return i("div",{key:o,ref:"bookShelfList",refInFor:!0,staticClass:"book-shelf-list-wrapper"},[i("div",{staticClass:"book-shelf-label-item",class:{"is-fixed":e.isFixed}},[i("span",{staticClass:"book-shelf-label-text"},[t._v(t._s(e.label))])]),i("div",{staticClass:"book-shelf-item-wrapper"},t._l(e.bookList,(function(e,o){return i("div",{key:e.id,staticClass:"book-shelf-item",on:{click:function(i){return t.onBookClick(e,o)}}},[i("div",{ref:"bookImg",refInFor:!0,staticClass:"book-img-wrapper",class:{"add-book":3===e.type,"category-book":2===e.type}},[1===e.type?i("shelf-image",{attrs:{data:e,isEditMode:t.isEditMode}}):2===e.type?i("shelf-category",{attrs:{data:e,isEditMode:t.isEditMode}}):i("span",{staticClass:"icon-add icon"})],1),i("div",{staticClass:"book-title-wrapper"},[i("span",{staticClass:"book-title title-small"},[t._v(t._s(e.title))])])])})),0)])})),0):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.showType,expression:"showType === 0"}],staticClass:"book-shelf-statistics"},[t._v(" "+t._s(t.$t("shelf.statistic").replace("$1",t.publicNumber).replace("$2",t.privateNumber))+" ")])],1)},s=[],a=(i("a9e3"),i("4de4"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shelf-category-wrapper"},[t.data.itemList.length>0?i("div",{staticClass:"shelf-category",class:{"is-edit":t.isEditMode}},t._l(t.data.itemList,(function(t,e){return i("div",{key:e,staticClass:"shelf-category-item"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.cover,expression:"item.cover"}],staticClass:"shelf-category-img"})])})),0):i("div",{staticClass:"shelf-category-bg"},[i("span",{staticClass:"icon-book2"})])])}),n=[],r={props:{data:Object,isEditMode:Boolean}},c=r,l=(i("461f"),i("2877")),h=Object(l["a"])(c,a,n,!1,null,"7d780b1e",null),u=h.exports,f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shelf-image"},[i("img",{staticClass:"book-img",attrs:{src:t.data.cover}}),i("span",{directives:[{name:"show",rawName:"v-show",value:t.isEditMode,expression:"isEditMode"}],staticClass:"icon-selected",class:{"is-selected":t.data.selected}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.data.private,expression:"data.private"}],staticClass:"private-wrapper"}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.data.private,expression:"data.private"}],staticClass:"private-icon-wrapper"},[i("span",{staticClass:"icon-private"})])])},d=[],p={props:{data:Object,isEditMode:Boolean}},v=p,m=(i("a916"),Object(l["a"])(v,f,d,!1,null,"242fc922",null)),b=m.exports,w=i("fa7d"),g=i("5de6"),k={props:{data:Array,isEditMode:Boolean,showType:{type:Number,default:0}},components:{ShelfCategory:u,ShelfImage:b},computed:{bookData:function(){return 0===this.showType?this.data:1===this.showType?Object(g["g"])(this.data):0},publicNumber:function(){if(this.data){var t=0;return this.data.filter((function(e){e.private||1!==e.type?2===e.type&&e.itemList.length>0&&(t+=e.itemList.filter((function(t){return!t.private&&1===t.type})).length):t++})),t}return 0},privateNumber:function(){if(this.data){var t=0;return this.data.filter((function(e){e.private&&1===e.type?t++:2===e.type&&e.itemList.length>0&&(t+=e.itemList.filter((function(t){return t.private&&1===t.type})).length)})),t}return 0},purchaseData:function(){var t={label:this.$t("shelf.bought"),bookList:this.flatData.filter((function(t){return t.cache})),isFixed:!1},e={label:this.$t("shelf.notPurchased"),bookList:this.flatData.filter((function(t){return!t.cache})),isFixed:!1};return[t,e]},bookShelfList:function(){return this.$refs.bookShelfList[0].getBoundingClientRect().height},bookShelfList2:function(){return this.$refs.bookShelfList[1].getBoundingClientRect().height}},methods:{fixTitle:function(t){2!==this.showType&&3!==this.showType||(t>Object(w["d"])(10)&&t<this.bookShelfList?!1===this.purchaseData[0].isFixed&&(this.purchaseData[0].isFixed=!0,this.purchaseData[1].isFixed=!1,this.$forceUpdate()):t>=this.bookShelfList-Object(w["d"])(42)?!1===this.purchaseData[1].isFixed&&(this.purchaseData[0].isFixed=!1,this.purchaseData[1].isFixed=!0,this.$forceUpdate()):(this.purchaseData[0].isFixed=!1,this.purchaseData[1].isFixed=!1,this.$forceUpdate()))},onBookClick:function(t,e){3===t.type?this.$router.push("/book-store/home"):1===t.type?this.isEditMode?t.selected=!t.selected:this.$emit("onBookClick",t,e):2===t.type&&(this.isEditMode||this.$router.push({path:"/book-store/category",query:{index:e}}))}}},y=k,C=(i("6442"),Object(l["a"])(y,o,s,!1,null,"63e9c616",null));e["a"]=C.exports},3884:function(t,e,i){"use strict";i("14b3")},"3ca3":function(t,e,i){"use strict";var o=i("6547").charAt,s=i("577e"),a=i("69f3"),n=i("7dd0"),r="String Iterator",c=a.set,l=a.getterFor(r);n(String,"String",(function(t){c(this,{type:r,string:s(t),index:0})}),(function(){var t,e=l(this),i=e.string,s=e.index;return s>=i.length?{value:void 0,done:!0}:(t=o(i,s),e.index+=t.length,{value:t,done:!1})}))},"3fbb":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[t.visible?i("div",{staticClass:"shelf-group-dialog-bg"},[t.selectGroupDialogVisible?i("div",{staticClass:"shelf-group-dialog-wrapper"},[i("div",{staticClass:"dialog-list"},[i("div",{staticClass:"dialog-title-wrapper"},[i("span",{staticClass:"dialog-title-text"},[t._v(t._s(t.$t("shelf.moveBook")))])]),i("div",{staticClass:"dialog-list-wrapper"},t._l(t.categoryList,(function(e,o){return i("div",{key:o,staticClass:"dialog-list-item",class:{"is-add":!!e.edit&&1===e.edit},on:{click:function(i){return t.onGroupClick(e)}}},[i("div",{staticClass:"dialog-list-item-text"},[t._v(t._s(e.title))]),t.category&&e.id&&t.category.id===e.id?i("div",{staticClass:"dialog-list-icon-wrapper"},[i("span",{staticClass:"icon-check"})]):t._e()])})),0)]),i("div",{staticClass:"dialog-btn-wrapper",on:{click:t.hide}},[i("div",{staticClass:"dialog-btn"},[t._v(t._s(t.$t("shelf.cancel")))])])]):t._e(),t.newGroupDialogVisible?i("div",{staticClass:"shelf-group-dialog-wrapper"},[i("div",{staticClass:"dialog-list"},[i("div",{staticClass:"dialog-title-wrapper"},[i("span",{staticClass:"dialog-title-text"},[t._v(t._s(t.$t("shelf.newGroup")))])]),i("div",{staticClass:"dialog-input-title-wrapper"},[i("span",{staticClass:"dialog-input-title"},[t._v(t._s(t.$t("shelf.groupName")))])]),i("div",{staticClass:"dialog-input-wrapper"},[i("div",{staticClass:"dialog-input-inner-wrapper"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newGroupName,expression:"newGroupName"}],ref:"dialogInput",staticClass:"dialog-input",attrs:{type:"text"},domProps:{value:t.newGroupName},on:{input:function(e){e.target.composing||(t.newGroupName=e.target.value)}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.newGroupName.length>0,expression:"newGroupName.length > 0"}],staticClass:"dialog-input-clear-wrapper",on:{click:t.clear}},[i("span",{staticClass:"icon-close-circle-fill"})])])])]),i("div",{staticClass:"dialog-btn-wrapper"},[i("div",{staticClass:"dialog-btn",on:{click:t.hide}},[t._v(t._s(t.$t("shelf.cancel")))]),i("div",{staticClass:"dialog-btn",class:{"is-empty":0===t.newGroupName.length},on:{click:t.createNewGroup}},[t._v(" "+t._s(t.$t("shelf.confirm"))+" ")])])]):t._e()]):t._e()])},s=[],a=i("2909"),n=(i("4de4"),i("99af"),{props:{visible:Boolean,data:Array,bookList:Array,isInGroup:Boolean,category:Object,isEditGroupName:{type:Boolean,default:!1}},computed:{defaultCategory:function(){return[{title:this.$t("shelf.newGroup"),edit:1},{title:this.$t("shelf.groupOut"),edit:2}]},categoryList:function(){var t=this.bookList?this.bookList.filter((function(t){return 2===t.type})):[];return[].concat(Object(a["a"])(this.defaultCategory),Object(a["a"])(t))}},data:function(){return{newGroupDialogVisible:!1,selectGroupDialogVisible:!0,newGroupName:""}},methods:{createNewGroup:function(){this.isEditGroupName?(this.$emit("editGroupName",this.category,this.newGroupName),this.hide()):(this.newGroupName.length>0&&this.$emit("group",2,{id:this.bookList[this.bookList.length-2].id+1,itemList:[],selected:!1,title:this.newGroupName,type:2}),this.hide())},clear:function(){this.newGroupName=""},onGroupClick:function(t){t.edit&&1===t.edit?this.showCreateGroupDialog():t.edit&&2===t.edit?(this.$emit("group",3,t),this.hide()):(this.$emit("group",1,t),this.hide())},showCreateGroupDialog:function(){var t=this;this.newGroupDialogVisible=!0,this.selectGroupDialogVisible=!1,this.newGroupName="",this.$nextTick((function(){t.$refs.dialogInput.focus()}))},showEditGroupDialog:function(){var t=this;this.newGroupDialogVisible=!0,this.selectGroupDialogVisible=!1,this.newGroupName=this.category.title,this.$nextTick((function(){t.$refs.dialogInput.focus()}))},show:function(){this.$emit("update:visible",!0)},hide:function(){this.$emit("update:visible",!1),this.newGroupDialogVisible=!1,this.selectGroupDialogVisible=!0}}}),r=n,c=(i("876f"),i("2877")),l=Object(c["a"])(r,o,s,!1,null,"4c6c7877",null);e["a"]=l.exports},"461f":function(t,e,i){"use strict";i("df94")},"4b39":function(t,e,i){},"4df4":function(t,e,i){"use strict";var o=i("0366"),s=i("7b0b"),a=i("9bdd"),n=i("e95a"),r=i("50c4"),c=i("8418"),l=i("35a1");t.exports=function(t){var e,i,h,u,f,d,p=s(t),v="function"==typeof this?this:Array,m=arguments.length,b=m>1?arguments[1]:void 0,w=void 0!==b,g=l(p),k=0;if(w&&(b=o(b,m>2?arguments[2]:void 0,2)),void 0==g||v==Array&&n(g))for(e=r(p.length),i=new v(e);e>k;k++)d=w?b(p[k],k):p[k],c(i,k,d);else for(u=g.call(p),f=u.next,i=new v;!(h=f.call(u)).done;k++)d=w?a(u,b,[h.value,k],!0):h.value,c(i,k,d);return i.length=k,i}},"508e":function(t,e,i){},"514d":function(t,e,i){"use strict";i("4b39")},"5b6e":function(t,e,i){},"5ef8":function(t,e,i){"use strict";i("d632")},6442:function(t,e,i){"use strict";i("8aa7")},"6dc5":function(t,e,i){},"757b":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"book-shelf"},[i("shelf-title",{directives:[{name:"show",rawName:"v-show",value:t.ifShowTitle,expression:"ifShowTitle"}],ref:"shelfTitle",staticClass:"shelf-title",attrs:{title:t.$t("shelf.title"),isEditMode:t.isEditMode,data:t.bookList,ifShowBack:t.ifShowBack,ifShowClear:t.ifShowClear},on:{"update:isEditMode":function(e){t.isEditMode=e},"update:is-edit-mode":function(e){t.isEditMode=e},onEditClick:t.onEditClick,clearCache:t.clearCache}}),i("scroll-view",{ref:"scroll",staticClass:"book-shelf-scroll-wrapper",attrs:{top:0,bottom:t.scrollBottom,initPosition:t.initPosition},on:{onScroll:t.onScroll}},[t.isDataEmpty?t._e():i("shelf-search",{ref:"shelfSearch",on:{onSearchClick:t.onSearchClick,onCancel:t.onSearchCancel,onTabClick:t.onSearchTabClick}}),t.isDataEmpty?t._e():i("book-shelf",{ref:"bookShelf",staticClass:"book-shelf-list",attrs:{data:t.bookList,showType:t.showType,isEditMode:t.isEditMode},on:{onBookClick:t.onBookClick}}),t.isDataEmpty?i("book-shelf-empty",{staticClass:"book-shelf-empty"}):t._e()],1),i("book-shelf-footer",{directives:[{name:"show",rawName:"v-show",value:t.isEditMode,expression:"isEditMode"}],staticClass:"book-shelf-footer",attrs:{data:t.bookList,bookList:t.bookList,isInGroup:!1},on:{setPrivate:t.setPrivate,setDownload:t.setDownload,removeBook:t.removeBook,groupEdit:t.groupEdit}}),i("toast",{ref:"toast",attrs:{text:t.toastText}})],1)},s=[],a=i("c7a9"),n=a["a"],r=(i("3884"),i("2877")),c=Object(r["a"])(n,o,s,!1,null,"44f64376",null);e["default"]=c.exports},"845a":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"emptyView",staticClass:"book-shelf-empty-wrapper"},[i("div",{staticClass:"empty-img-wrapper"},[i("img",{staticClass:"empty-img",attrs:{src:t.img}})]),i("div",{staticClass:"empty-text-wrapper"},[i("div",{staticClass:"empty-text",domProps:{innerHTML:t._s(t.$t("shelf.welcome"))}})]),i("div",{staticClass:"empty-btn-wrapper"},[i("div",{staticClass:"empty-btn",on:{click:t.gotoBookStore}},[t._v(t._s(t.$t("shelf.find")))])])])},s=[],a=i("fa7d"),n={data:function(){return{img:i("e6eb")}},methods:{gotoBookStore:function(){this.$router.push("/book-store/home")},gotoStudy:function(){window.location.href="https://www.baidu.com"}},mounted:function(){this.$refs.emptyView.style.height=window.innerHeight-Object(a["d"])(42)+"px"}},r=n,c=(i("27f0"),i("2877")),l=Object(c["a"])(r,o,s,!1,null,"768999de",null);e["a"]=l.exports},8663:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"popup"},[i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.popupVisible,expression:"popupVisible"}],staticClass:"popup-bg",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.hide.apply(null,arguments)},touchmove:function(t){t.preventDefault()}}})]),i("transition",{attrs:{name:"popup-slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.popupVisible,expression:"popupVisible"}],staticClass:"popup-wrapper"},[t.title&&t.title.length>0?i("div",{staticClass:"popup-title"},[t._v(" "+t._s(t.title)+" ")]):t._e(),t.thirdText&&t.thirdText.length>0?i("div",{staticClass:"popup-confirm-btn",on:{click:t.third}},[t._v(" "+t._s(t.thirdText)+" ")]):t._e(),i("div",{staticClass:"popup-confirm-btn",class:{"is-remove":t.isRemoveText},on:{click:t.confirm}},[t._v(" "+t._s(t.confirmText)+" ")]),i("div",{staticClass:"popup-cancel-btn",on:{click:t.hide}},[t._v(t._s(t.cancelText))])])])],1)},s=[],a={props:{title:String,confirmText:String,isRemoveText:Boolean,cancelText:String,thirdText:String},data:function(){return{popupVisible:!1,visible:!1}},methods:{third:function(){var t=this;this.hide(),setTimeout((function(){t.$emit("third")}),200)},confirm:function(){var t=this;this.hide(),setTimeout((function(){t.$emit("confirm")}),200)},hide:function(){var t=this;this.popupVisible=!1,setTimeout((function(){t.visible=!1}),200)},show:function(){this.visible=!0,this.popupVisible=!0}}},n=a,r=(i("5ef8"),i("2877")),c=Object(r["a"])(n,o,s,!1,null,"47b831b7",null);e["a"]=c.exports},"876f":function(t,e,i){"use strict";i("99e1")},"8aa7":function(t,e,i){},"96cf":function(t,e,i){var o=function(t){"use strict";var e,i=Object.prototype,o=i.hasOwnProperty,s="function"===typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",n=s.asyncIterator||"@@asyncIterator",r=s.toStringTag||"@@toStringTag";function c(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(D){c=function(t,e,i){return t[e]=i}}function l(t,e,i,o){var s=e&&e.prototype instanceof m?e:m,a=Object.create(s.prototype),n=new E(o||[]);return a._invoke=T(t,i,n),a}function h(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(D){return{type:"throw",arg:D}}}t.wrap=l;var u="suspendedStart",f="suspendedYield",d="executing",p="completed",v={};function m(){}function b(){}function w(){}var g={};c(g,a,(function(){return this}));var k=Object.getPrototypeOf,y=k&&k(k(G([])));y&&y!==i&&o.call(y,a)&&(g=y);var C=w.prototype=m.prototype=Object.create(g);function x(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function i(s,a,n,r){var c=h(t[s],t,a);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"===typeof u&&o.call(u,"__await")?e.resolve(u.__await).then((function(t){i("next",t,n,r)}),(function(t){i("throw",t,n,r)})):e.resolve(u).then((function(t){l.value=t,n(l)}),(function(t){return i("throw",t,n,r)}))}r(c.arg)}var s;function a(t,o){function a(){return new e((function(e,s){i(t,o,e,s)}))}return s=s?s.then(a,a):a()}this._invoke=a}function T(t,e,i){var o=u;return function(s,a){if(o===d)throw new Error("Generator is already running");if(o===p){if("throw"===s)throw a;return B()}i.method=s,i.arg=a;while(1){var n=i.delegate;if(n){var r=$(n,i);if(r){if(r===v)continue;return r}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===u)throw o=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=d;var c=h(t,e,i);if("normal"===c.type){if(o=i.done?p:f,c.arg===v)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(o=p,i.method="throw",i.arg=c.arg)}}}function $(t,i){var o=t.iterator[i.method];if(o===e){if(i.delegate=null,"throw"===i.method){if(t.iterator["return"]&&(i.method="return",i.arg=e,$(t,i),"throw"===i.method))return v;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var s=h(o,t.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,v;var a=s.arg;return a?a.done?(i[t.resultName]=a.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,v):a:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,v)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function G(t){if(t){var i=t[a];if(i)return i.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var s=-1,n=function i(){while(++s<t.length)if(o.call(t,s))return i.value=t[s],i.done=!1,i;return i.value=e,i.done=!0,i};return n.next=n}}return{next:B}}function B(){return{value:e,done:!0}}return b.prototype=w,c(C,"constructor",w),c(w,"constructor",b),b.displayName=c(w,r,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,c(t,r,"GeneratorFunction")),t.prototype=Object.create(C),t},t.awrap=function(t){return{__await:t}},x(S.prototype),c(S.prototype,n,(function(){return this})),t.AsyncIterator=S,t.async=function(e,i,o,s,a){void 0===a&&(a=Promise);var n=new S(l(e,i,o,s),a);return t.isGeneratorFunction(i)?n:n.next().then((function(t){return t.done?t.value:n.next()}))},x(C),c(C,r,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){while(e.length){var o=e.pop();if(o in t)return i.value=o,i.done=!1,i}return i.done=!0,i}},t.values=G,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var i in this)"t"===i.charAt(0)&&o.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function s(o,s){return r.type="throw",r.arg=t,i.next=o,s&&(i.method="next",i.arg=e),!!s}for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a],r=n.completion;if("root"===n.tryLoc)return s("end");if(n.tryLoc<=this.prev){var c=o.call(n,"catchLoc"),l=o.call(n,"finallyLoc");if(c&&l){if(this.prev<n.catchLoc)return s(n.catchLoc,!0);if(this.prev<n.finallyLoc)return s(n.finallyLoc)}else if(c){if(this.prev<n.catchLoc)return s(n.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&o.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var a=s;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var n=a?a.completion:{};return n.type=t,n.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(n)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),_(i),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var o=i.completion;if("throw"===o.type){var s=o.arg;_(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,o){return this.delegate={iterator:G(t),resultName:i,nextLoc:o},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=o}catch(s){"object"===typeof globalThis?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},"99e1":function(t,e,i){},"9bdd":function(t,e,i){var o=i("825a"),s=i("2a62");t.exports=function(t,e,i,a){try{return a?e(o(i)[0],i[1]):e(i)}catch(n){throw s(t),n}}},a630:function(t,e,i){var o=i("23e7"),s=i("4df4"),a=i("1c7e"),n=!a((function(t){Array.from(t)}));o({target:"Array",stat:!0,forced:n},{from:s})},a916:function(t,e,i){"use strict";i("5b6e")},b0c0:function(t,e,i){var o=i("83ab"),s=i("9bf2").f,a=Function.prototype,n=a.toString,r=/^\s*function ([^ (]*)/,c="name";o&&!(c in a)&&s(a,c,{configurable:!0,get:function(){try{return n.call(this).match(r)[1]}catch(t){return""}}})},b31d:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"book-shelf-footer"},[t._l(t.tabs,(function(e,o){return i("div",{key:o,staticClass:"book-shelf-tab-wrapper",on:{click:function(i){return t.onTabClick(e)}}},[i("div",{staticClass:"book-shelf-tab"},[1!==e.index||t.isPrivate?t._e():i("div",{staticClass:"icon-private tab-icon",class:{"is-selected":t.isSelected}}),1===e.index&&t.isPrivate?i("div",{staticClass:"icon-private-see tab-icon",class:{"is-selected":t.isSelected}}):t._e(),2!==e.index||t.isDownload?t._e():i("div",{staticClass:"icon-download tab-icon",class:{"is-selected":t.isSelected}}),2===e.index&&t.isDownload?i("div",{staticClass:"icon-download-remove tab-icon",class:{"is-selected":t.isSelected}}):t._e(),3===e.index?i("div",{staticClass:"icon-move tab-icon",class:{"is-selected":t.isSelected}}):t._e(),4===e.index?i("div",{staticClass:"icon-shelf tab-icon",class:{"is-selected":t.isSelected}}):t._e(),i("div",{staticClass:"tab-text",class:{"remove-text":4===e.index,"is-selected":t.isSelected}},[t._v(" "+t._s(t.label(e))+" ")])])])})),i("popup",{ref:"popup",attrs:{title:t.popTitle,confirmText:t.confirmText,isRemoveText:t.isRemoveText,cancelText:t.$t("shelf.cancel")},on:{confirm:t.onConfirm}}),i("shelf-group-dialog",{attrs:{visible:t.ifGroupDialogShow,data:t.data,bookList:t.bookList,category:t.category,isInGroup:t.isInGroup},on:{"update:visible":function(e){t.ifGroupDialogShow=e},group:t.groupEdit}})],2)},s=[],a=(i("159b"),i("ac1f"),i("5319"),i("8663")),n=i("3fbb"),r={props:{data:Array,isInGroup:Boolean,bookList:Array,category:Object},components:{ShelfGroupDialog:n["a"],Popup:a["a"]},computed:{selectedBooks:function(){var t=[];return this.data.forEach((function(e){e.selected&&t.push(e)})),t},isSelected:function(){return!!this.data&&this.data.some((function(t){return t.selected}))},isPrivate:function(){return!!this.isSelected&&this.data.every((function(t){return!t.selected||t.private}))},isDownload:function(){return!!this.isSelected&&this.data.every((function(t){return!t.selected||t.cache}))},tabs:function(){return[{label:this.$t("shelf.private"),label2:this.$t("shelf.noPrivate"),index:1},{label:this.$t("shelf.download"),label2:this.$t("shelf.delete"),index:2},{label:this.$t("shelf.move"),index:3},{label:this.$t("shelf.remove"),index:4}]}},data:function(){return{popTitle:"",confirmText:"",isRemoveText:!1,ifShowPopup:!1,ifGroupDialogShow:!1,onConfirm:function(){}}},methods:{label:function(t){switch(t.index){case 1:return this.isPrivate?t.label2:t.label;case 2:return this.isDownload?t.label2:t.label;default:return t.label}},removeBook:function(){this.$emit("removeBook")},onSetDownload:function(){this.$emit("setDownload",!0)},onRemoveDownload:function(){this.$emit("setDownload",!1)},onSetPrivate:function(){this.$emit("setPrivate",!0)},onCancelPrivate:function(){this.$emit("setPrivate",!1)},onTabClick:function(t){1===t.index?this.showPrivate():2===t.index?this.showDownload():3===t.index?this.showGroupDialog():4===t.index&&this.showRemove()},showGroupDialog:function(){this.isSelected&&(this.ifGroupDialogShow=!0)},showRemove:function(){var t;this.isSelected&&(t=1===this.selectedBooks.length?this.$t("shelf.removeBookTitle").replace("$1","《"+this.selectedBooks[0].title+"》"):this.$t("shelf.removeBookTitle").replace("$1",this.$t("shelf.selectedBooks")),this.showPopup(t,this.$t("shelf.removeBook"),this.removeBook,!0))},showDownload:function(){this.isSelected&&(this.isDownload?this.showPopup(this.$t("shelf.removeDownloadTitle"),this.$t("shelf.delete"),this.onRemoveDownload,!0):this.showPopup(this.$t("shelf.setDownloadTitle"),this.$t("shelf.open"),this.onSetDownload))},showPrivate:function(){this.isSelected&&(this.isPrivate?this.showPopup(this.$t("shelf.closePrivateTitle"),this.$t("shelf.close"),this.onCancelPrivate):this.showPopup(this.$t("shelf.setPrivateTitle"),this.$t("shelf.open"),this.onSetPrivate))},showPopup:function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.popTitle=t,this.confirmText=e,this.onConfirm=i,this.isRemoveText=o,this.$refs.popup.show()},groupEdit:function(t,e){this.$emit("groupEdit",t,e)}}},c=r,l=(i("fd3f"),i("2877")),h=Object(l["a"])(c,o,s,!1,null,"12474e42",null);e["a"]=h.exports},ba26:function(t,e,i){},c7a9:function(t,e,i){"use strict";(function(t){var o=i("1da1"),s=i("2909"),a=(i("96cf"),i("4de4"),i("159b"),i("99af"),i("ac1f"),i("5319"),i("aff5"),i("a9e3"),i("d3b7"),i("3ca3"),i("ddb0"),i("0093")),n=i("f429"),r=i("2c89"),c=i("4e1b"),l=i("b31d"),h=i("845a"),u=i("4729"),f=i("365c"),d=i("e8ec"),p=i("101f"),v=i("5de6"),m=i("a211"),b=i("fa7d");t.ePub=m["a"];var w="bookShelf";e["a"]={components:{ShelfTitle:a["a"],ShelfSearch:n["a"],BookShelf:r["a"],ScrollView:c["a"],BookShelfFooter:l["a"],BookShelfEmpty:h["a"],Toast:u["a"]},computed:{isDataEmpty:function(){return!this.bookList||0===this.bookList.filter((function(t){return 3!==t.type})).length}},data:function(){return{bookList:[],ifShowTitle:!0,isEditMode:!1,ifShowBack:!1,ifShowClear:!0,scrollBottom:0,toastText:"",showType:0,initPosition:{x:0,y:0}}},methods:{onSearchTabClick:function(t){this.showType=t},groupEdit:function(t,e){switch(t){case 1:this.moveToGroup(e);break;case 2:this.newGroup(e),this.moveToGroup(e);break;case 3:this.moveOutGroup();break}},getSelectedBooks:function(){var t=this.bookList.filter((function(t){return t.selected}));return this.bookList.filter((function(e){2===e.type&&e.itemList&&e.itemList.filter((function(e){e.selected&&t.push(e)}))})),t},clearSelectedBooks:function(){this.bookList=this.bookList.filter((function(t){return!t.selected})),this.bookList.forEach((function(t){2===t.type&&t.itemList&&(t.itemList=t.itemList.filter((function(t){return!t.selected})))}))},appendBookToList:function(t){var e=this,i=this.bookList[this.bookList.length-1].id+1;t.forEach((function(t){t.id=i++,e.bookList.push(t)}))},moveOutGroup:function(){this.clearAddFromBookList();var t=this.getSelectedBooks();this.clearSelectedBooks(),this.appendBookToList(t),this.appendAddToBookList(),this.onEditClick(!1),this.saveBookShelfToLocalStorage(),this.showToast(this.$t("shelf.moveBookOutSuccess"))},newGroup:function(t){this.clearAddFromBookList(),this.bookList.push(t),this.appendAddToBookList()},moveToGroup:function(t){var e=this.getSelectedBooks();this.clearSelectedBooks(),t&&t.itemList&&(t.itemList=[].concat(Object(s["a"])(t.itemList),Object(s["a"])(e)),t.itemList.forEach((function(t,e){t.id=e+1}))),this.onEditClick(!1),this.saveBookShelfToLocalStorage(),this.showToast(this.$t("shelf.moveBookInSuccess").replace("$1",t.title))},appendAddToBookList:function(){this.bookList.push({cover:"",title:"",type:3,id:Number.MAX_SAFE_INTEGER})},clearAddFromBookList:function(){this.bookList=this.bookList.filter((function(t){return 3!==t.type}))},removeBook:function(){this.bookList=this.bookList.filter((function(t){return t.itemList&&(t.itemList=t.itemList.filter((function(t){return!t.selected}))),!t.selected})),this.onEditClick(!1),this.saveBookShelfToLocalStorage()},clearCache:function(){var t=this;Object(d["a"])(),Object(p["a"])((function(){console.log("清除localForage成功..."),t.getBookShelf()})),this.showToast(this.$t("shelf.clearCacheSuccess"))},onBookClick:function(t,e){this.$router.push({path:"/book-store/detail",query:{fileName:t.fileName,category:t.categoryText}})},showToast:function(t){this.toastText=t,this.$refs.toast.show()},hideToast:function(){this.$refs.toast.hide()},showContinueToast:function(t){this.toastText=t,this.$refs.toast.continueShow()},removeDownloadBook:function(t){return Object(v["j"])(t.fileName)},downloadBook:function(t){var e=this;return new Promise((function(i,o){Object(p["b"])(t.fileName,(function(s,a){!s&&a instanceof Blob?(console.log("[".concat(t.fileName,"]读取成功..."),a,new m["a"](a)),i()):Object(f["b"])(t,(function(t){console.log("["+t.fileName+"]下载成功..."),i()}),o,o,(function(i){var o=Math.floor(i.loaded/i.total*100)+"%";e.toastText=e.$t("shelf.progressDownload").replace("$1","".concat(t.fileName,".epub(").concat(o,")"))}))}))}))},setDownload:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var o,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:e.showContinueToast(e.$t("shelf.startDownload")),o=regeneratorRuntime.mark((function i(o){var s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(s=e.bookList[o],!t||!s.selected){i.next=6;break}return i.next=4,e.downloadBook(s).then((function(){s.cache=t}));case 4:i.next=9;break;case 6:if(t||!s.selected){i.next=9;break}return i.next=9,e.removeDownloadBook(s).then((function(){s.cache=t}));case 9:if(!s.itemList){i.next=17;break}a=0;case 11:if(!(a<s.itemList.length)){i.next=17;break}return i.next=14,e.downloadItem(s.itemList[a],t);case 14:a++,i.next=11;break;case 17:case"end":return i.stop()}}),i)})),s=0;case 3:if(!(s<e.bookList.length)){i.next=8;break}return i.delegateYield(o(s),"t0",5);case 5:s++,i.next=3;break;case 8:e.hideToast(),t?e.showToast(e.$t("shelf.setDownloadSuccess")):e.showToast(e.$t("shelf.removeDownloadSuccess")),e.onEditClick(!1),e.saveBookShelfToLocalStorage(),console.log("数据保存成功...");case 13:case"end":return i.stop()}}),i)})))()},downloadItem:function(t,e){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!e||!t.selected){o.next=5;break}return o.next=3,i.downloadBook(t).then((function(){t.cache=e}));case 3:o.next=8;break;case 5:if(e||!t.selected){o.next=8;break}return o.next=8,i.removeDownloadBook(t).then((function(){t.cache=e}));case 8:case"end":return o.stop()}}),o)})))()},setPrivate:function(t){this.bookList.forEach((function(e){e.selected&&(e.private=t)})),this.onEditClick(!1),this.saveBookShelfToLocalStorage(),t?this.showToast(this.$t("shelf.setPrivateSuccess")):this.showToast(this.$t("shelf.closePrivateSuccess"))},onEditClick:function(t){var e=this;this.isEditMode=t,this.isEditMode||this.bookList.forEach((function(t){t.bookId?t.selected=!1:t.itemList&&t.itemList.forEach((function(t){t.selected=!1}))})),this.isEditMode?(this.scrollBottom=48,this.$nextTick((function(){e.$refs.scroll&&e.$refs.scroll.refresh()}))):(this.scrollBottom=0,this.$nextTick((function(){e.$refs.scroll&&e.$refs.scroll.refresh()})))},onSearchClick:function(){this.onEditClick(!1),this.showType=1,this.hideTitle()},onSearchCancel:function(){this.showTitle(),this.showType=0,this.$refs.scroll.scrollTo(0,0)},showTitle:function(){this.ifShowTitle=!0},hideTitle:function(){this.ifShowTitle=!1},onScroll:function(t){t>Object(b["d"])(54)?(this.$refs.shelfTitle.showShadow(),this.ifShowTitle||this.$refs.shelfSearch.showShadow()):(this.$refs.shelfTitle.hideShadow(),this.$refs.shelfSearch&&this.$refs.shelfSearch.hideShadow())},getBookShelf:function(){var t=this;this.bookList=this.getBookShelfFromLocalStorage(),this.bookList||Object(f["f"])().then((function(e){t.bookList=e.data.bookList,t.bookList||(t.bookList=[]),t.appendAddToBookList(),t.saveBookShelfToLocalStorage(),t.initBookShelf()})),this.initBookShelf()},initBookShelf:function(){this.bookList&&this.bookList.forEach((function(t){t.selected=!1}))},saveBookShelfToLocalStorage:function(){Object(d["v"])(w,this.bookList)},getBookShelfFromLocalStorage:function(){return Object(d["f"])(w)}},mounted:function(){this.getBookShelf()}}}).call(this,i("c8ba"))},d28b:function(t,e,i){var o=i("746f");o("iterator")},d632:function(t,e,i){},ddb0:function(t,e,i){var o=i("da84"),s=i("fdbc"),a=i("e260"),n=i("9112"),r=i("b622"),c=r("iterator"),l=r("toStringTag"),h=a.values;for(var u in s){var f=o[u],d=f&&f.prototype;if(d){if(d[c]!==h)try{n(d,c,h)}catch(v){d[c]=h}if(d[l]||n(d,l,u),s[u])for(var p in a)if(d[p]!==a[p])try{n(d,p,a[p])}catch(v){d[p]=a[p]}}}},df94:function(t,e,i){},e5b5:function(t,e,i){"use strict";i("6dc5")},e6eb:function(t,e,i){t.exports=i.p+"img/bitbook.dcd16d65.png"},f429:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shelf-search-wrapper",class:{"search-top":t.ifShowCancel,"hide-shadow":t.ifHideShadow}},[i("div",{staticClass:"shelf-search",class:{"search-top":t.ifShowCancel}},[i("div",{staticClass:"search-wrapper"},[t._m(0),i("div",{staticClass:"search-input-wrapper"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"searchInput",staticClass:"search-input",attrs:{type:"text",placeholder:t.$t("shelf.search")},domProps:{value:t.searchText},on:{input:[function(e){e.target.composing||(t.searchText=e.target.value)},t.checkSearchText],click:t.onSearchClick}})]),t.ifShowClear?i("div",{staticClass:"icon-clear-wrapper",on:{click:t.clearSearchText}},[i("span",{staticClass:"icon-close-circle-fill icon"})]):t._e()]),t.ifShowCancel?i("div",{staticClass:"cancel-btn-wrapper",on:{click:t.onCancel}},[i("span",{staticClass:"cancel-btn"},[t._v(t._s(t.$t("shelf.cancel")))])]):i("div",{staticClass:"icon-clock-wrapper",on:{click:t.showReadHistory}},["cn"===t.lang()?i("span",{staticClass:"icon-cn icon"}):i("span",{staticClass:"icon-en icon"})])]),i("transition",{attrs:{name:"shelf-tab-slide-up"}},[t.ifShowCancel?i("div",{staticClass:"tab-wrapper"},t._l(t.tabs,(function(e,o){return i("div",{key:o,staticClass:"tab-item",on:{click:function(i){return t.onTabClick(e)}}},[t.showShadow?i("span",{staticClass:"tab-item-text",class:{"is-selected":e.selected}},[t._v(t._s(e.text))]):t._e()])})),0):t._e()])],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"icon-search-wrapper"},[i("span",{staticClass:"icon-search icon"})])}],a=(i("159b"),i("5de6")),n=i("e8ec"),r={computed:{tabs:function(){return[{id:1,text:this.$t("shelf.default"),selected:!0},{id:2,text:this.$t("shelf.progress"),selected:!1},{id:3,text:this.$t("shelf.purchase"),selected:!1}]}},data:function(){return{ifShowCancel:!1,ifShowClear:!1,ifHideShadow:!0,searchText:""}},methods:{lang:function(){return Object(n["f"])("locale")},showReadHistory:function(){Object(a["n"])(this)},onTabClick:function(t){this.tabs.forEach((function(e){e.id===t.id?e.selected=!0:e.selected=!1})),this.$emit("onTabClick",t.id),this.$forceUpdate()},showShadow:function(){this.ifHideShadow=!1},hideShadow:function(){this.ifHideShadow=!0},onCancel:function(){this.$emit("onCancel"),this.ifShowCancel=!1},clearSearchText:function(){this.searchText="",this.checkSearchText(),this.$refs.searchInput.focus()},checkSearchText:function(){this.searchText&&this.searchText.length>0?this.ifShowClear=!0:this.ifShowClear=!1},onSearchClick:function(){this.$emit("onSearchClick"),this.ifShowCancel=!0}}},c=r,l=(i("514d"),i("2877")),h=Object(l["a"])(c,o,s,!1,null,"17ef4c46",null);e["a"]=h.exports},fb6a:function(t,e,i){"use strict";var o=i("23e7"),s=i("861d"),a=i("e8b5"),n=i("23cb"),r=i("50c4"),c=i("fc6a"),l=i("8418"),h=i("b622"),u=i("1dde"),f=u("slice"),d=h("species"),p=[].slice,v=Math.max;o({target:"Array",proto:!0,forced:!f},{slice:function(t,e){var i,o,h,u=c(this),f=r(u.length),m=n(t,f),b=n(void 0===e?f:e,f);if(a(u)&&(i=u.constructor,"function"!=typeof i||i!==Array&&!a(i.prototype)?s(i)&&(i=i[d],null===i&&(i=void 0)):i=void 0,i===Array||void 0===i))return p.call(u,m,b);for(o=new(void 0===i?Array:i)(v(b-m,0)),h=0;m<b;m++,h++)m in u&&l(o,h,u[m]);return o.length=h,o}})},fd3f:function(t,e,i){"use strict";i("508e")}}]);
//# sourceMappingURL=chunk-0dfc7ee2.b3e755e9.js.map