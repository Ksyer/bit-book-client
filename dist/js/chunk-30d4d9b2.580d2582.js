(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30d4d9b2"],{"00ce":function(t,e,s){},"08b7":function(t,e,s){},"101a":function(t,e,s){},"115c":function(t,e,s){"use strict";s("00ce")},1440:function(t,e,s){},"17b0":function(t,e,s){},"1a2b":function(t,e,s){"use strict";s("bbe6")},"25f0":function(t,e,s){"use strict";var i=s("6eeb"),n=s("825a"),o=s("577e"),a=s("d039"),r=s("ad6d"),c="toString",l=RegExp.prototype,u=l[c],h=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),f=u.name!=c;(h||f)&&i(RegExp.prototype,c,(function(){var t=n(this),e=o(t.source),s=t.flags,i=o(void 0===s&&t instanceof RegExp&&!("flags"in l)?r.call(t):s);return"/"+e+"/"+i}),{unsafe:!0})},"2a0c":function(t,e,s){"use strict";s("87c2")},"2ada":function(t,e,s){},"2ca0":function(t,e,s){"use strict";var i=s("23e7"),n=s("06cf").f,o=s("50c4"),a=s("577e"),r=s("5a34"),c=s("1d80"),l=s("ab13"),u=s("c430"),h="".startsWith,f=Math.min,d=l("startsWith"),b=!u&&!d&&!!function(){var t=n(String.prototype,"startsWith");return t&&!t.writable}();i({target:"String",proto:!0,forced:!b&&!d},{startsWith:function(t){var e=a(c(this));r(t);var s=o(f(arguments.length>1?arguments[1]:void 0,e.length)),i=a(t);return h?h.call(e,i,s):e.slice(s,s+i.length)===i}})},"2ffd":function(t,e,s){},"3ca3":function(t,e,s){"use strict";var i=s("6547").charAt,n=s("577e"),o=s("69f3"),a=s("7dd0"),r="String Iterator",c=o.set,l=o.getterFor(r);a(String,"String",(function(t){c(this,{type:r,string:n(t),index:0})}),(function(){var t,e=l(this),s=e.string,n=e.index;return n>=s.length?{value:void 0,done:!0}:(t=i(s,n),e.index+=t.length,{value:t,done:!1})}))},"3cd4":function(t,e,s){"use strict";s("80fd")},"44e7":function(t,e,s){var i=s("861d"),n=s("c6b6"),o=s("b622"),a=o("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==n(t))}},4570:function(t,e,s){"use strict";s("1440")},"4dcb":function(t,e,s){"use strict";s("7281")},"4e1b":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper",class:{"no-scroll":t.ifNoScroll},on:{"&scroll":function(e){return t.handleScroll.apply(null,arguments)}}},[t._t("default")],2)},n=[],o=(s("a9e3"),s("fa7d")),a={props:{top:{type:Number,default:0},bottom:{type:Number,default:0},ifNoScroll:{type:Boolean,default:!1},initPosition:{type:Object,default:function(){return{x:0,y:0}}}},methods:{handleScroll:function(t){var e=t.target.scrollTop||window.pageYOffset||document.body.scrollTop;this.$emit("onScroll",e)},scrollTo:function(t,e){this.$refs.scrollWrapper.scrollTo(t,e)},refresh:function(){this.$refs.scrollWrapper&&(this.$refs.scrollWrapper.style.height=window.innerHeight-Object(o["d"])(this.top)-Object(o["d"])(this.bottom)+"px",this.$refs.scrollWrapper.addEventListener("scroll",this.handleScroll))}},mounted:function(){var t=this;this.refresh(),this.$nextTick((function(){setTimeout((function(){t.scrollTo(Object(o["d"])(t.initPosition.x),Object(o["d"])(t.initPosition.y))}),1)}))}},r=a,c=(s("4570"),s("2877")),l=Object(c["a"])(r,i,n,!1,null,"0b4ae033",null);e["a"]=l.exports},"51a1":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"ebookView",staticClass:"ebook"},[s("ebook-bookmark"),s("ebook-header"),s("ebook-title"),s("router-view"),s("ebook-menu"),s("ebook-footer")],1)},n=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-down"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible,expression:"menuVisible"}],staticClass:"title-wrapper"},[s("div",{staticClass:"left",on:{click:t.back}},[s("span",{staticClass:"icon-back"})]),s("div",{staticClass:"right"},[s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-shelf"})]),s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-cart"})]),s("div",{staticClass:"icon-wrapper",on:{click:t.gotoBookStore}},[s("span",{staticClass:"icon-more"})])])])])},a=[],r=s("ac0d"),c={mixins:[r["b"]],methods:{back:function(){this.$router.go(-1)},gotoBookStore:function(){this.$router.push("/book-store")}}},l=c,u=(s("4dcb"),s("2877")),h=Object(u["a"])(l,o,a,!1,null,"cf7595b8",null),f=h.exports,d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-menu"},[s("transition",{attrs:{name:"slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible,expression:"menuVisible"}],staticClass:"menu-wrapper",class:{"hide-box-shadow":t.settingVisible>=0||!t.menuVisible}},[s("div",{staticClass:"icon-wrapper",class:{selected:3===t.settingVisible}},[s("span",{staticClass:"icon-menu",on:{click:function(e){return t.showSetting(3)}}})]),s("div",{staticClass:"icon-wrapper",class:{selected:2===t.settingVisible}},[s("span",{staticClass:"icon-progress",on:{click:function(e){return t.showSetting(2)}}})]),s("div",{staticClass:"icon-wrapper",class:{selected:1===t.settingVisible}},[s("span",{staticClass:"icon-bright",on:{click:function(e){return t.showSetting(1)}}})]),s("div",{staticClass:"icon-wrapper",class:{selected:0===t.settingVisible}},[s("span",{staticClass:"icon-A",on:{click:function(e){return t.showSetting(0)}}})])])]),s("ebook-setting-font"),s("ebook-setting-font-popup"),s("ebook-setting-theme"),s("ebook-setting-progress"),s("ebook-slide"),s("ebook-speaking-icon")],1)},b=[],p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&0===t.settingVisible,expression:"menuVisible && settingVisible === 0"}],staticClass:"setting-wrapper"},[s("div",{staticClass:"setting-font-size"},[s("div",{ref:"left",staticClass:"preview"},[s("span",{ref:"leftText",style:t.styleLeft},[t._v("A")])]),s("div",{staticClass:"select"},t._l(t.fontSizeList,(function(e,i){return s("div",{key:i,ref:"item",refInFor:!0,staticClass:"select-wrapper",on:{click:function(s){return t.setFontSize(e.fontSize)}}},[s("div",{staticClass:"line"}),s("div",{staticClass:"point-wrapper"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.defaultFontSize===e.fontSize,expression:"defaultFontSize === item.fontSize"}],staticClass:"point"},[s("div",{staticClass:"small-point"})])]),s("div",{staticClass:"line"})])})),0),s("div",{ref:"right",staticClass:"preview"},[s("span",{ref:"rightText",style:t.styleRight},[t._v("A")])])]),s("div",{staticClass:"setting-font-family",on:{click:function(e){return e.stopPropagation(),t.showFontFamilySetting.apply(null,arguments)}}},[s("div",{staticClass:"setting-font-family-text-wrapper"},[s("span",{staticClass:"setting-font-family-text"},[t._v(t._s(t.defaultFontFamily))])]),s("div",{staticClass:"setting-font-family-icon-wrapper"},[s("span",{staticClass:"icon-forward"})])])])])},m=[],k={mixins:[r["b"]],data:function(){return{styleLeft:{},styleRight:{}}},watch:{settingVisible:function(t){var e=this;0===t&&this.$nextTick((function(){e.genStyle()}))}},methods:{genStyle:function(){var t=this.$refs.left.getBoundingClientRect().width,e=this.$refs.left.getBoundingClientRect().width,s=this.$refs.leftText.getBoundingClientRect().width,i=this.$refs.leftText.getBoundingClientRect().width,n=this.$refs.item[0].getBoundingClientRect().width;this.styleLeft={marginLeft:(t+n-s)/2+"px",fontSize:this.fontSizeList[0].fontSize+"px"},this.styleRight={marginRight:(e+n-i)/2+"px",fontSize:this.fontSizeList[this.fontSizeList.length-1].fontSize+"px"}}}},v=k,g=(s("2a0c"),Object(u["a"])(v,p,m,!1,null,"08037596",null)),w=g.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"popup-slide-up"}},[t.fontFamilyVisible?s("div",{staticClass:"ebook-popup-list"},[s("div",{staticClass:"ebook-popup-title"},[s("div",{staticClass:"ebook-popup-title-icon",on:{click:t.hideFontFamilySetting}},[s("span",{staticClass:"icon-down2"})]),s("span",{staticClass:"ebook-popup-title-text"},[t._v(t._s(t.$t("book.selectFont")))])]),s("div",{staticClass:"ebook-popup-list-wrapper"},t._l(t.fontFamily,(function(e,i){return s("div",{key:i,staticClass:"ebook-popup-item",on:{click:function(s){return t.setFontFamily(e.font)}}},[s("div",{staticClass:"ebook-popup-item-text",class:{selected:t.isSelected(e)}},[t._v(" "+t._s(e.font)+" ")]),t.isSelected(e)?s("div",{staticClass:"ebook-popup-item-check"},[s("span",{staticClass:"icon-check"})]):t._e()])})),0)]):t._e()])},C=[],x={mixins:[r["b"]],methods:{isSelected:function(t){return this.defaultFontFamily===t.font}}},_=x,S=(s("fde6"),Object(u["a"])(_,y,C,!1,null,"7c47f7b5",null)),O=S.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&1===t.settingVisible,expression:"menuVisible && settingVisible === 1"}],staticClass:"setting-wrapper"},[s("div",{staticClass:"setting-theme"},t._l(t.themeList,(function(e,i){return s("div",{key:i,staticClass:"setting-theme-item",on:{click:function(s){return t.setTheme(e.name)}}},[s("div",{staticClass:"preview",class:{selected:e.name===t.defaultTheme},style:{background:e.style.body.background}}),s("div",{staticClass:"text",class:{selected:e.name===t.defaultTheme}},[t._v(" "+t._s(e.alias)+" ")])])})),0)])])},V=[],$={mixins:[r["b"]]},j=$,F=(s("ed38"),Object(u["a"])(j,B,V,!1,null,"cb25f456",null)),P=F.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&2===t.settingVisible,expression:"menuVisible && settingVisible === 2"}],staticClass:"setting-wrapper"},[s("div",{staticClass:"setting-progress"},[s("div",{staticClass:"read-time-wrapper"},[s("span",{staticClass:"read-time-text"},[t._v(t._s(t.getReadTime()))]),s("span",{staticClass:"icon-forward"})]),s("div",{staticClass:"progress-wrapper"},[s("div",{staticClass:"progress-icon-wrapper"},[s("span",{staticClass:"icon-back",on:{click:function(e){return t.prevSection()}}})]),s("input",{ref:"progress",staticClass:"progress",attrs:{type:"range",max:"100",min:"0",step:"1",disabled:!t.bookAvailable},domProps:{value:t.progress},on:{input:function(e){return t.onProgressInput(e.target.value)},change:function(e){return t.onProgressChange(e.target.value)}}}),s("div",{staticClass:"progress-icon-wrapper",on:{click:function(e){return t.nextSection()}}},[s("span",{staticClass:"icon-forward"})])]),s("div",{staticClass:"text-wrapper"},[s("span",{staticClass:"progress-section-text"},[t._v(t._s(t.getSectionName))]),s("span",{staticClass:"progress-text"},[t._v("("+t._s(t.bookAvailable?t.progress+"%":t.$t("book.loading"))+")")])])])])])},E=[],N=s("e8ec"),L={mixins:[r["b"]],data:function(){return{isProgressLoading:!1}},methods:{prevSection:function(){var t=this;this.section>0&&!this.isProgressLoading&&(this.isProgressLoading=!0,this.setSection(this.section-1).then((function(){t.displaySection((function(){t.updateProgressBg(),t.isProgressLoading=!1}))})))},nextSection:function(){var t=this;this.currentBook.spine.length-1>this.section&&!this.isProgressLoading&&(this.isProgressLoading=!0,this.setSection(this.section+1).then((function(){t.displaySection((function(){t.updateProgressBg(),t.isProgressLoading=!1}))})))},onProgressInput:function(t){var e=this;this.setProgress(t).then((function(){e.updateProgressBg()}))},onProgressChange:function(t){var e=this;this.setProgress(t).then((function(){e.updateProgressBg(),e.displayProgress()})),Object(N["s"])(this.fileName,t)},updateProgressBg:function(){this.$refs.progress.style.backgroundSize="".concat(this.progress,"% 100%")}},updated:function(){this.$refs.progress.style.backgroundSize="".concat(this.progress,"% 100%")}},D=L,z=(s("115c"),Object(u["a"])(D,T,E,!1,null,"5fef9b9e",null)),I=z.exports,R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible,expression:"menuVisible"}],staticClass:"ebook-speaking-icon",style:t.style,on:{click:t.onClick}},[s("span",{staticClass:"icon-headphone"})])])},M=[],W=s("fa7d"),A=s("5de6"),Y={mixins:[r["b"]],watch:{settingVisible:function(t){t>=0?this.setSpeakingIconBottom(Object(W["d"])(148)):this.setSpeakingIconBottom(Object(W["d"])(58))}},computed:{style:function(){return{bottom:this.speakingIconBottom+"px"}}},methods:{onClick:function(){this.$router.push({path:"/book-store/book-speaking",query:{fileName:this.fileName}}),Object(A["l"])(this)}}},G=Y,H=(s("8baa"),Object(u["a"])(G,R,M,!1,null,"29ce58d3",null)),q=H.exports,J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:3===t.settingVisible||4===t.settingVisible,expression:"settingVisible === 3 || settingVisible === 4"}],staticClass:"slide-content-wrapper"},[s("transition",{attrs:{name:"slide-right"}},[3===t.settingVisible||4===t.settingVisible?s("div",{staticClass:"content"},[t.isPaginating?s("div",{staticClass:"empty"},[s("ebook-loading")],1):s("div",{staticClass:"content-page-wrapper"},[s("div",{staticClass:"content-page"},[s("keep-alive",[s(1===t.tab?t.content:t.bookmark,{tag:"component"})],1)],1),s("div",{staticClass:"content-page-tab"},[s("div",{staticClass:"content-page-tab-item",class:{selected:1===t.tab},on:{click:function(e){return t.selectTab(1)}}},[t._v(" "+t._s(t.$t("book.navigation"))+" ")]),s("div",{staticClass:"content-page-tab-item",class:{selected:2===t.tab},on:{click:function(e){return t.selectTab(2)}}},[t._v(" "+t._s(t.$t("book.bookmark"))+" ")])])])]):t._e()]),3===t.settingVisible||4===t.settingVisible?s("div",{staticClass:"content-bg",on:{click:function(e){return t.hideMenuVisible()}}}):t._e()],1)])},K=[],Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-loading"},[s("div",{staticClass:"ebook-loading-wrapper"},[t._l(t.data,(function(e,i){return s("div",{key:i,staticClass:"ebook-loading-item"},t._l(e,(function(t,e){return s("div",{key:e,staticClass:"ebook-loading-line-wrapper"},[s("div",{ref:"line",refInFor:!0,staticClass:"ebook-loading-line"}),s("div",{ref:"mask",refInFor:!0,staticClass:"ebook-loading-mask"})])})),0)})),s("div",{staticClass:"ebook-loading-center"})],2)])},U=[],X=(s("159b"),{data:function(){return{data:[[{},{},{}],[{},{},{}]],maskWidth:[{value:0},{value:0},{value:0},{value:0},{value:0},{value:0}],lineWidth:[{value:16},{value:16},{value:16},{value:16},{value:16},{value:16}],add:!0,end:!1}},methods:{},mounted:function(){var t=this;this.task=setInterval((function(){t.$refs.mask.forEach((function(e,s){var i=t.$refs.mask[s],n=t.$refs.line[s],o=t.maskWidth[s],a=t.lineWidth[s];if(0===s)t.add&&o.value<16?(o.value++,a.value--):!t.add&&a.value<16&&(o.value--,a.value++);else if(t.add&&o.value<16){var r=t.maskWidth[s-1];r.value>=8&&(o.value++,a.value--)}else if(!t.add&&a.value<16){var c=t.lineWidth[s-1];c.value>=8&&(o.value--,a.value++)}i.style.width="".concat(Object(W["c"])(o.value),"rem"),i.style.flex="0 0 ".concat(Object(W["c"])(o.value),"rem"),n.style.width="".concat(Object(W["c"])(a.value),"rem"),n.style.flex="0 0 ".concat(Object(W["c"])(a.value),"rem"),s===t.maskWidth.length-1&&(t.add?16===o.value&&(t.end=!0):0===o.value&&(t.end=!0)),t.end&&(t.add=!t.add,t.end=!1)}))}),20)},beforeDestroy:function(){this.task&&clearInterval(this.task)}}),Z=X,tt=(s("c8ca"),Object(u["a"])(Z,Q,U,!1,null,"7e3118aa",null)),et=tt.exports,st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-slide-contents"},[s("div",{staticClass:"slide-contents-search-wrapper"},[s("div",{staticClass:"slide-contents-search-input-wrapper"},[t._m(0),s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"searchInput",staticClass:"slide-contents-search-input",attrs:{type:"text",placeholder:t.$t("book.searchHint")},domProps:{value:t.searchText},on:{click:function(e){return t.showSearchPage()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()},input:function(e){e.target.composing||(t.searchText=e.target.value)}}})]),t.searchVisible?s("div",{staticClass:"slide-contents-search-cancel",on:{click:function(e){return t.hideSearchPage()}}},[t._v(" "+t._s(t.$t("book.cancel"))+" ")]):t._e()]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.searchVisible,expression:"!searchVisible"}],staticClass:"slide-contents-book-wrapper"},[s("div",{staticClass:"slide-contents-book-img-wrapper"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.cover,expression:"cover"}],staticClass:"slide-contents-book-img"})]),s("div",{staticClass:"slide-contents-book-info-wrapper"},[s("div",{staticClass:"slide-contents-book-title"},[s("span",{staticClass:"slide-contents-book-title-text"},[t._v(t._s(t.metadata.title))])]),s("div",{staticClass:"slide-contents-book-author"},[s("span",{staticClass:"slide-contents-book-author-text"},[t._v(t._s(t.metadata.creator))])])]),s("div",{staticClass:"slide-contents-book-progress-wrapper"},[s("div",{staticClass:"slide-contents-book-progress"},[s("span",{staticClass:"progress"},[t._v(t._s(t.progress+"%"))]),s("span",{staticClass:"progress-text"},[t._v(t._s(t.$t("book.haveRead2")))])]),s("div",{staticClass:"slide-contents-book-time"},[t._v(t._s(t.getReadTime()))])])]),s("scroll",{directives:[{name:"show",rawName:"v-show",value:!t.searchVisible,expression:"!searchVisible"}],ref:"scroll",staticClass:"slide-contents-list",attrs:{top:156,bottom:48}},t._l(t.navigation,(function(e,i){return s("div",{key:i,staticClass:"slide-contents-item",on:{click:function(s){return t.display(e.href)}}},[s("span",{staticClass:"slide-contents-item-label",class:{selected:t.section===i}},[t._v(t._s(e.label.trim()))]),s("span",{staticClass:"slide-contents-item-page"},[t._v(t._s(e.page))])])})),0),s("scroll",{directives:[{name:"show",rawName:"v-show",value:t.searchVisible,expression:"searchVisible"}],ref:"scroll",staticClass:"slide-search-list",attrs:{top:66,bottom:48}},t._l(t.searchList,(function(e,i){return s("div",{key:i,staticClass:"slide-search-item",domProps:{innerHTML:t._s(e.excerpt)},on:{click:function(s){return t.display(e.cfi,!0)}}})})),0)],1)},it=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"slide-contents-search-icon"},[s("span",{staticClass:"icon-search"})])}],nt=(s("d81d"),s("ac1f"),s("5319"),s("d3b7"),s("3ca3"),s("ddb0"),s("7db0"),s("99af"),s("4e1b")),ot={mixins:[r["b"]],components:{Scroll:nt["a"]},data:function(){return{searchText:"",searchVisible:!1,searchList:null}},methods:{showSearchPage:function(){this.searchVisible=!0},hideSearchPage:function(){this.searchVisible=!1},search:function(){var t=this;this.doSearch(this.searchText).then((function(e){t.searchList=e.map((function(e){return e.excerpt=e.excerpt.replace(t.searchText,'<span class="content-search-text">'.concat(t.searchText,"</span>")),e})),t.$refs.searchInput.blur()}))},doSearch:function(t){var e=this;return Promise.all(this.currentBook.spine.spineItems.map((function(s){return s.load(e.currentBook.load.bind(e.currentBook)).then(s.find.bind(s,t)).finally(s.unload.bind(s))}))).then((function(t){return Promise.resolve([].concat.apply([],t))}))}}},at=ot,rt=(s("a6aa"),Object(u["a"])(at,st,it,!1,null,"0571618a",null)),ct=rt.exports,lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-slide-bookmark"},[s("div",{staticClass:"slide-bookmark-title"},[t._v(" "+t._s(t.$t("book.bookmark"))+" · "+t._s(t.bookmark?t.bookmark.length:0)+" ")]),s("scroll",{staticClass:"slide-bookmark-list",attrs:{top:48,bottom:48}},t._l(t.bookmark,(function(e,i){return s("div",{key:i,staticClass:"slide-bookmark-item",on:{click:function(s){return t.display(e.cfi)}}},[s("div",{staticClass:"slide-bookmark-item-icon"},[s("div",{staticClass:"icon-bookmark"})]),s("div",{staticClass:"slide-bookmark-item-text"},[t._v(t._s(e.text))])])})),0)],1)},ut=[],ht={mixins:[r["b"]],components:{Scroll:nt["a"]},data:function(){return{bookmark:null}},mounted:function(){this.bookmark=Object(N["b"])(this.fileName)}},ft=ht,dt=(s("1a2b"),Object(u["a"])(ft,lt,ut,!1,null,"74434306",null)),bt=dt.exports,pt={mixins:[r["b"]],components:{EbookLoading:et},data:function(){return{tab:1,content:ct,bookmark:bt}},methods:{selectTab:function(t){this.tab=t}}},mt=pt,kt=(s("3cd4"),Object(u["a"])(mt,J,K,!1,null,"04eb7c78",null)),vt=kt.exports,gt={mixins:[r["b"]],components:{EbookSettingFontPopup:O,EbookSlide:vt,EbookSettingProgress:I,EbookSettingFont:w,EbookSettingTheme:P,EbookSpeakingIcon:q}},wt=gt,yt=(s("9109"),Object(u["a"])(wt,d,b,!1,null,"853049ae",null)),Ct=yt.exports,xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-header"},[s("span",{staticClass:"ebook-header-text"},[t._v(t._s(t.getSectionName))])])},_t=[],St={mixins:[r["b"]]},Ot=St,Bt=(s("b124"),Object(u["a"])(Ot,xt,_t,!1,null,"293e30a4",null)),Vt=Bt.exports,$t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-footer"},[s("span",{staticClass:"ebook-footer-text"},[t._v(t._s(this.progress+"%"))])])},jt=[],Ft={mixins:[r["b"]]},Pt=Ft,Tt=(s("64fb"),Object(u["a"])(Pt,$t,jt,!1,null,"086187e6",null)),Et=Tt.exports,Nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"ebookBookmark",staticClass:"ebook-bookmark"},[s("div",{staticClass:"ebook-bookmark-text-wrapper"},[s("div",{ref:"iconDown",staticClass:"ebook-bookmark-down-wrapper"},[s("span",{staticClass:"icon-down"})]),s("div",{staticClass:"ebook-bookmark-text"},[t._v(" "+t._s(t.text)+" ")])]),s("div",{staticClass:"ebook-bookmark-icon-wrapper",style:t.fixed&&!t.isPaginating?t.fixedStyle:{}},[s("book-mark",{ref:"bookmark",attrs:{width:15,height:35,color:t.color}})],1)])},Lt=[],Dt=(s("c7cd"),s("25f0"),s("4de4"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"bookmark",staticClass:"ebook-bookmark-icon",style:t.style})}),zt=[],It=(s("a9e3"),{props:{width:Number,height:Number,color:String},computed:{style:function(){return{borderColor:"".concat(this.color," ").concat(this.color," transparent ").concat(this.color)}}},methods:{refresh:function(){this.height&&this.width&&this.width>0&&this.height>10&&(this.$refs.bookmark.style.borderWidth="".concat(Object(W["c"])(this.height-5),"rem ").concat(Object(W["c"])(this.width/2),"rem ").concat(Object(W["c"])(5),"rem ").concat(Object(W["c"])(this.width/2),"rem"))}},mounted:function(){this.refresh()}}),Rt=It,Mt=(s("a256"),Object(u["a"])(Rt,Dt,zt,!1,null,"2a6e62e0",null)),Wt=Mt.exports,At="#346cbc",Yt="#fff",Gt={mixins:[r["b"]],components:{BookMark:Wt},computed:{height:function(){return Object(W["d"])(35)},threshold:function(){return Object(W["d"])(55)},fixedStyle:function(){return{position:"fixed",right:"".concat((window.innerWidth-this.$refs.ebookBookmark.clientWidth)/2,"px"),top:0}}},watch:{offsetY:function(t){var e=this;this.settingVisible>0||this.menuVisible||this.isPaginating||(t>=this.height&&t<this.threshold?(this.setBookmark=!1,this.$refs.ebookBookmark.style.top="".concat(-t,"px"),"rotate(180deg)"===this.$refs.iconDown.style.transform&&(this.$refs.iconDown.style.transform="rotate(0deg)"),this.isBookmark?(this.text=this.$t("book.pulldownDeleteMark"),this.color=At):(this.text=this.$t("book.pulldownAddMark"),this.color=Yt)):t>=this.threshold?(this.setBookmark=!0,this.$refs.ebookBookmark.style.top="".concat(-t,"px"),"rotate(0deg)"!==this.$refs.iconDown.style.transform&&""!==this.$refs.iconDown.style.transform||(this.$refs.iconDown.style.transform="rotate(180deg)"),this.isBookmark?(this.text=this.$t("book.releaseDeleteMark"),this.color=Yt):(this.text=this.$t("book.releaseAddMark"),this.color=At)):t>0&&t<this.height?(this.setBookmark=!1,this.isBookmark?this.text=this.$t("book.pulldownDeleteMark"):this.text=this.$t("book.pulldownAddMark")):0===t&&(this.isBookmark?this.setBookmark?(this.fixed=!1,this.removeBookmark()):this.fixed=!0:this.setBookmark?(this.fixed=!0,this.setAndSaveBookmark()):this.fixed=!1,setTimeout((function(){e.$refs.ebookBookmark.style.top="".concat(-e.height,"px"),e.$refs.iconDown.style.transform="rotate(0deg)",e.fixed||e.color!==At||(e.color=Yt),e.text===e.$t("book.releaseAddMark")&&(e.text=e.$t("book.pulldownAddMark")),e.setBookmark=!1}),200)))},isBookmark:function(t){this.fixed=t,this.color=t?At:Yt}},data:function(){return{color:Yt,text:"",setBookmark:!1,fixed:!1}},methods:{setAndSaveBookmark:function(){var t=this;this.bookmark=Object(N["b"])(this.fileName),this.bookmark||(this.bookmark=[]);var e=this.currentBook.rendition.currentLocation(),s=e.start.cfi.replace(/!.*/,"").replace("epubcfi(",""),i=e.start.cfi.replace(/.*!/,"").replace(/\)/,""),n=e.end.cfi.replace(/.*!/,"").replace(/\)/,""),o="epubcfi(".concat(s,"!,").concat(i,",").concat(n,")"),a=e.start.cfi;this.currentBook.getRange(o).then((function(e){var s=e.toString();s=s.replace(/\s\s/g,""),s=s.replace(/\r/g,""),s=s.replace(/\n/g,""),s=s.replace(/\t/g,""),s=s.replace(/\f/g,""),t.bookmark.push({cfi:a,text:s}),t.setIsBookmark(!0),Object(N["l"])(t.fileName,t.bookmark)}))},removeBookmark:function(){var t=this.currentBook.rendition.currentLocation(),e=t.start.cfi;this.bookmark&&(this.bookmark=this.bookmark.filter((function(t){return t.cfi!==e})),Object(N["l"])(this.fileName,this.bookmark)),this.setIsBookmark(!1)}}},Ht=Gt,qt=(s("cd95"),Object(u["a"])(Ht,Nt,Lt,!1,null,"486b2084",null)),Jt=qt.exports,Kt={mixins:[r["b"]],components:{EbookBookmark:Jt,EbookFooter:Et,EbookHeader:Vt,EbookTitle:f,EbookMenu:Ct},watch:{offsetY:function(t){null===this.isPaginating||!1!==this.isPaginating||this.menuVisible||(0===t?this.restore():t>0&&this.move(t))}},methods:{restore:function(){var t=this;this.$refs.ebookView.style.top=0,this.$refs.ebookView.style.transition="all .2s linear",setTimeout((function(){t.$refs.ebookView.style.transition=""}),200)},move:function(t){this.$refs.ebookView.style.top=t+"px"},startLoopReadTime:function(){var t=this,e=Object(N["i"])(name);e||(e=0),this.task=setInterval((function(){e++,e%30===0&&Object(N["t"])(t.fileName,e)}),1e3)}},created:function(){this.setGlobalTheme()},mounted:function(){this.startLoopReadTime()},beforeDestroy:function(){this.task&&clearInterval(this.task)}},Qt=Kt,Ut=(s("a058"),Object(u["a"])(Qt,i,n,!1,null,"7caaaf50",null));e["default"]=Ut.exports},5263:function(t,e,s){},"5a34":function(t,e,s){var i=s("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"64fb":function(t,e,s){"use strict";s("17b0")},7281:function(t,e,s){},"75bc":function(t,e,s){},"80fd":function(t,e,s){},"857a":function(t,e,s){var i=s("1d80"),n=s("577e"),o=/"/g;t.exports=function(t,e,s,a){var r=n(i(t)),c="<"+e;return""!==s&&(c+=" "+s+'="'+n(a).replace(o,"&quot;")+'"'),c+">"+r+"</"+e+">"}},"87c2":function(t,e,s){},"8baa":function(t,e,s){"use strict";s("75bc")},9109:function(t,e,s){"use strict";s("101a")},9706:function(t,e,s){},a058:function(t,e,s){"use strict";s("2ada")},a256:function(t,e,s){"use strict";s("9706")},a6aa:function(t,e,s){"use strict";s("e754")},ab13:function(t,e,s){var i=s("b622"),n=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(s){try{return e[n]=!1,"/./"[t](e)}catch(i){}}return!1}},ac0d:function(t,e,s){"use strict";s.d(e,"b",(function(){return u})),s.d(e,"a",(function(){return h}));s("b64b"),s("a4d3"),s("4de4"),s("e439"),s("159b"),s("dbb4");function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){i(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}s("b0c0"),s("2ca0"),s("ac1f"),s("5319");var a=s("2f62"),r=s("5de6"),c=s("fa7d"),l=s("e8ec"),u={computed:o(o({},Object(a["c"])(["fileName","menuVisible","settingVisible","defaultFontSize","defaultFontFamily","fontFamilyVisible","defaultTheme","bookAvailable","progress","section","isPaginating","currentBook","navigation","cover","metadata","paginate","pagelist","offsetY","isBookmark","speakingIconBottom"])),{},{themeList:function(){return Object(r["o"])(this)},getSectionName:function(){if(this.section){var t=this.currentBook.section(this.section);if(t&&t.href&&this.currentBook&&this.currentBook.navigation)return this.navigation[this.section].label}}}),data:function(){return{fontSizeList:r["b"],fontFamily:r["a"]}},methods:o(o({},Object(a["b"])(["setFileName","setMenuVisible","setSettingVisible","setDefaultFontSize","setDefaultFontFamily","setFontFamilyVisible","setDefaultTheme","setBookAvailable","setProgress","setSection","setIsPaginating","setCurrentBook","setNavigation","setCover","setMetadata","setPaginate","setPagelist","setOffsetY","setIsBookmark","setSpeakingIconBottom"])),{},{showFontFamilySetting:function(){this.setFontFamilyVisible(!0)},showSetting:function(t){this.setSettingVisible(t)},hideMenuVisible:function(){this.setMenuVisible(!1),this.setSettingVisible(-1),this.setFontFamilyVisible(!1)},toggleMenuVisible:function(){this.menuVisible&&(this.setSettingVisible(-1),this.setFontFamilyVisible(!1)),this.setMenuVisible(!this.menuVisible)},hideFontFamilySetting:function(){this.setFontFamilyVisible(!1)},setGlobalTheme:function(t){switch(Object(c["e"])(),t){case"Default":Object(c["a"])("".concat("http://47.99.166.157/book/res","/theme/theme_default.css"));break;case"Eye":Object(c["a"])("".concat("http://47.99.166.157/book/res","/theme/theme_eye.css"));break;case"Gold":Object(c["a"])("".concat("http://47.99.166.157/book/res","/theme/theme_gold.css"));break;case"Night":Object(c["a"])("".concat("http://47.99.166.157/book/res","/theme/theme_night.css"));break;default:this.setDefaultTheme("Default"),Object(c["a"])("".concat("http://47.99.166.157/book/res","/theme/theme_default.css"));break}},registerTheme:function(){var t=this;this.themeList.forEach((function(e){t.currentBook.rendition.themes.register(e.name,e.style)}))},switchTheme:function(){var t=this,e=this.themeList.filter((function(e){return e.name===t.defaultTheme}))[0];this.defaultFontFamily&&"Default"!==this.defaultFontFamily?e.style.body["font-family"]="".concat(this.defaultFontFamily,"!important"):e.style.body["font-family"]="Times New Roman!important",this.registerTheme(),this.currentBook.rendition.themes.select(this.defaultTheme),this.currentBook.rendition.themes.fontSize(this.defaultFontSize),this.setGlobalTheme(this.defaultTheme)},setFontSize:function(t){var e=this;this.setDefaultFontSize(t).then((function(){e.switchTheme(),l["n"](e.fileName,t)}))},setTheme:function(t){var e=this;this.setDefaultTheme(t).then((function(){e.switchTheme(),l["u"](e.fileName,t)}))},setFontFamily:function(t){var e=this;this.setDefaultFontFamily(t).then((function(){e.switchTheme(),l["m"](e.fileName,t)}))},displaySection:function(t){var e=this,s=this.currentBook.section(this.section);s&&s.href&&this.currentBook.rendition.display(s.href).then((function(){e.refreshLocation(),t&&t()}))},displayProgress:function(){var t=this,e=this.currentBook.locations.cfiFromPercentage(this.progress/100);this.currentBook.rendition.display(e).then((function(){t.refreshLocation()}))},display:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?this.currentBook.rendition.display(t).then((function(){s&&t.startsWith("epubcfi")&&e.currentBook.getRange(t).then((function(s){e.currentBook.rendition.annotations.highlight(t,{},(function(t){}))})),e.refreshLocation()})):this.currentBook.rendition.display().then((function(){e.refreshLocation()})),this.hideMenuVisible()},refreshLocation:function(){var t=this.currentBook.rendition.currentLocation();if(t.start&&t.start.index){this.setSection(t.start.index);var e=this.currentBook.locations.percentageFromCfi(t.start.cfi);this.setProgress(Math.floor(100*e)),this.pagelist?t.start.location<=0?this.setPaginate(""):this.setPaginate(t.start.location+" / "+this.pagelist.length):this.setPaginate("");var s=t.start.cfi,i=l["b"](this.fileName);i&&i.some((function(t){return t.cfi===s}))?this.setIsBookmark(!0):this.setIsBookmark(!1),l["q"](this.fileName,s)}},getReadTime:function(){return this.$t("book.haveRead").replace("$1",Object(r["i"])(this.fileName))}})},h={methods:{showBookDetail:function(t){Object(r["m"])(this,t)}}}},af03:function(t,e,s){var i=s("d039");t.exports=function(t){return i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},b0c0:function(t,e,s){var i=s("83ab"),n=s("9bf2").f,o=Function.prototype,a=o.toString,r=/^\s*function ([^ (]*)/,c="name";i&&!(c in o)&&n(o,c,{configurable:!0,get:function(){try{return a.call(this).match(r)[1]}catch(t){return""}}})},b124:function(t,e,s){"use strict";s("d2d1")},b1ca:function(t,e,s){},b64b:function(t,e,s){var i=s("23e7"),n=s("7b0b"),o=s("df75"),a=s("d039"),r=a((function(){o(1)}));i({target:"Object",stat:!0,forced:r},{keys:function(t){return o(n(t))}})},bbe6:function(t,e,s){},c7cd:function(t,e,s){"use strict";var i=s("23e7"),n=s("857a"),o=s("af03");i({target:"String",proto:!0,forced:o("fixed")},{fixed:function(){return n(this,"tt","","")}})},c8ca:function(t,e,s){"use strict";s("b1ca")},cd95:function(t,e,s){"use strict";s("08b7")},d2d1:function(t,e,s){},d81d:function(t,e,s){"use strict";var i=s("23e7"),n=s("b727").map,o=s("1dde"),a=o("map");i({target:"Array",proto:!0,forced:!a},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(t,e,s){var i=s("23e7"),n=s("83ab"),o=s("56ef"),a=s("fc6a"),r=s("06cf"),c=s("8418");i({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,s,i=a(t),n=r.f,l=o(i),u={},h=0;while(l.length>h)s=n(i,e=l[h++]),void 0!==s&&c(u,e,s);return u}})},ddb0:function(t,e,s){var i=s("da84"),n=s("fdbc"),o=s("e260"),a=s("9112"),r=s("b622"),c=r("iterator"),l=r("toStringTag"),u=o.values;for(var h in n){var f=i[h],d=f&&f.prototype;if(d){if(d[c]!==u)try{a(d,c,u)}catch(p){d[c]=u}if(d[l]||a(d,l,h),n[h])for(var b in o)if(d[b]!==o[b])try{a(d,b,o[b])}catch(p){d[b]=o[b]}}}},e439:function(t,e,s){var i=s("23e7"),n=s("d039"),o=s("fc6a"),a=s("06cf").f,r=s("83ab"),c=n((function(){a(1)})),l=!r||c;i({target:"Object",stat:!0,forced:l,sham:!r},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},e754:function(t,e,s){},ed38:function(t,e,s){"use strict";s("5263")},fde6:function(t,e,s){"use strict";s("2ffd")}}]);
//# sourceMappingURL=chunk-30d4d9b2.580d2582.js.map