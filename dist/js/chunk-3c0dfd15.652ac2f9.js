(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c0dfd15"],{"08d3":function(t,e,i){},"18b9":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"book-detail"},[i("detail-title",{ref:"title",attrs:{showShelf:!0},on:{back:t.back}}),i("scroll",{ref:"scroll",staticClass:"content-wrapper",attrs:{top:42,bottom:52},on:{onScroll:t.onScroll}},[i("book-info",{attrs:{cover:t.cover,title:t.title,author:t.author,desc:t.desc}}),i("div",{staticClass:"book-detail-content-wrapper"},[i("div",{staticClass:"book-detail-content-title"},[t._v(" "+t._s(t.$t("detail.copyright"))+" ")]),i("div",{staticClass:"book-detail-content-list-wrapper"},[i("div",{staticClass:"book-detail-content-row"},[i("div",{staticClass:"book-detail-content-label"},[t._v(" "+t._s(t.$t("detail.publisher"))+" ")]),i("div",{staticClass:"book-detail-content-text"},[t._v(t._s(t.publisher))])]),i("div",{staticClass:"book-detail-content-row"},[i("div",{staticClass:"book-detail-content-label"},[t._v(" "+t._s(t.$t("detail.category"))+" ")]),i("div",{staticClass:"book-detail-content-text"},[t._v(t._s(t.categoryText))])]),i("div",{staticClass:"book-detail-content-row"},[i("div",{staticClass:"book-detail-content-label"},[t._v(t._s(t.$t("detail.lang")))]),i("div",{staticClass:"book-detail-content-text"},[t._v(t._s(t.lang))])]),i("div",{staticClass:"book-detail-content-row"},[i("div",{staticClass:"book-detail-content-label"},[t._v(t._s(t.$t("detail.ISBN")))]),i("div",{staticClass:"book-detail-content-text"},[t._v(t._s(t.isbn))])])])]),i("div",{staticClass:"book-detail-content-wrapper"},[i("div",{staticClass:"book-detail-content-title"},[t._v(" "+t._s(t.$t("detail.navigation"))+" ")]),i("div",{staticClass:"book-detail-content-list-wrapper"},[this.navigation?t._e():i("div",{staticClass:"loading-text-wrapper"},[i("span",{staticClass:"loading-text"},[t._v(t._s(t.$t("detail.loading")))])]),i("div",{staticClass:"book-detail-content-item-wrapper"},t._l(t.flatNavigation,(function(e,o){return i("div",{key:o,staticClass:"book-detail-content-item",on:{click:function(i){return t.read(e)}}},[e.label?i("div",{staticClass:"book-detail-content-navigation-text",class:{"is-sub":e.deep>1},style:t.itemStyle(e)},[t._v(" "+t._s(e.label)+" ")]):t._e()])})),0)])]),i("div",{staticClass:"book-detail-content-wrapper"},[i("div",{staticClass:"book-detail-content-title"},[t._v(t._s(t.$t("detail.trial")))]),i("div",{staticClass:"book-detail-content-list-wrapper"},[this.displayed?t._e():i("div",{staticClass:"loading-text-wrapper"},[i("span",{staticClass:"loading-text"},[t._v(t._s(t.$t("detail.loading")))])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:this.displayed,expression:"this.displayed"}],ref:"preview",attrs:{id:"preview"}})])],1),i("div",{staticClass:"bottom-wrapper"},[i("div",{staticClass:"bottom-btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.readBook()}}},[t._v(" "+t._s(t.$t("detail.read"))+" ")]),i("div",{staticClass:"bottom-btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.trialListening()}}},[t._v(" "+t._s(t.$t("detail.listen"))+" ")]),i("div",{staticClass:"bottom-btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addOrRemoveShelf()}}},[t.inBookShelf?i("span",{staticClass:"icon-check"}):t._e(),t._v(" "+t._s(t.inBookShelf?t.$t("detail.isAddedToShelf"):t.$t("detail.addOrRemoveShelf"))+" ")])]),i("toast",{ref:"toast",attrs:{text:t.toastText}})],1)},a=[],n=i("be79"),r=n["a"],s=(i("5108"),i("2877")),c=Object(s["a"])(r,o,a,!1,null,"2b2cdc06",null);e["default"]=c.exports},"25f0":function(t,e,i){"use strict";var o=i("6eeb"),a=i("825a"),n=i("577e"),r=i("d039"),s=i("ad6d"),c="toString",l=RegExp.prototype,d=l[c],u=r((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),f=d.name!=c;(u||f)&&o(RegExp.prototype,c,(function(){var t=a(this),e=n(t.source),i=t.flags,o=n(void 0===i&&t instanceof RegExp&&!("flags"in l)?s.call(t):i);return"/"+e+"/"+o}),{unsafe:!0})},2909:function(t,e,i){"use strict";function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function a(t){if(Array.isArray(t))return o(t)}i.d(e,"a",(function(){return c}));i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("a630");function n(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}i("fb6a"),i("b0c0");function r(t,e){if(t){if("string"===typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(t,e):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return a(t)||n(t)||r(t)||s()}},"2ca0":function(t,e,i){"use strict";var o=i("23e7"),a=i("06cf").f,n=i("50c4"),r=i("577e"),s=i("5a34"),c=i("1d80"),l=i("ab13"),d=i("c430"),u="".startsWith,f=Math.min,h=l("startsWith"),p=!d&&!h&&!!function(){var t=a(String.prototype,"startsWith");return t&&!t.writable}();o({target:"String",proto:!0,forced:!p&&!h},{startsWith:function(t){var e=r(c(this));s(t);var i=n(f(arguments.length>1?arguments[1]:void 0,e.length)),o=r(t);return u?u.call(e,o,i):e.slice(i,i+o.length)===o}})},"3ca3":function(t,e,i){"use strict";var o=i("6547").charAt,a=i("577e"),n=i("69f3"),r=i("7dd0"),s="String Iterator",c=n.set,l=n.getterFor(s);r(String,"String",(function(t){c(this,{type:s,string:a(t),index:0})}),(function(){var t,e=l(this),i=e.string,a=e.index;return a>=i.length?{value:void 0,done:!0}:(t=o(i,a),e.index+=t.length,{value:t,done:!1})}))},"44e7":function(t,e,i){var o=i("861d"),a=i("c6b6"),n=i("b622"),r=n("match");t.exports=function(t){var e;return o(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==a(t))}},"4d63":function(t,e,i){var o=i("83ab"),a=i("da84"),n=i("94ca"),r=i("7156"),s=i("9112"),c=i("9bf2").f,l=i("241c").f,d=i("44e7"),u=i("577e"),f=i("ad6d"),h=i("9f7f"),p=i("6eeb"),v=i("d039"),b=i("5135"),g=i("69f3").enforce,m=i("2626"),k=i("b622"),y=i("fce3"),w=i("107c"),S=k("match"),_=a.RegExp,C=_.prototype,x=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,$=/a/g,I=/a/g,N=new _($)!==$,A=h.UNSUPPORTED_Y,O=o&&(!N||A||y||w||v((function(){return I[S]=!1,_($)!=$||_(I)==I||"/a/i"!=_($,"i")}))),B=function(t){for(var e,i=t.length,o=0,a="",n=!1;o<=i;o++)e=t.charAt(o),"\\"!==e?n||"."!==e?("["===e?n=!0:"]"===e&&(n=!1),a+=e):a+="[\\s\\S]":a+=e+t.charAt(++o);return a},j=function(t){for(var e,i=t.length,o=0,a="",n=[],r={},s=!1,c=!1,l=0,d="";o<=i;o++){if(e=t.charAt(o),"\\"===e)e+=t.charAt(++o);else if("]"===e)s=!1;else if(!s)switch(!0){case"["===e:s=!0;break;case"("===e:x.test(t.slice(o+1))&&(o+=2,c=!0),a+=e,l++;continue;case">"===e&&c:if(""===d||b(r,d))throw new SyntaxError("Invalid capture group name");r[d]=!0,n.push([d,l]),c=!1,d="";continue}c?d+=e:a+=e}return[a,n]};if(n("RegExp",O)){for(var T=function(t,e){var i,o,a,n,c,l,h=this instanceof T,p=d(t),v=void 0===e,b=[],m=t;if(!h&&p&&v&&t.constructor===T)return t;if((p||t instanceof T)&&(t=t.source,v&&(e="flags"in m?m.flags:f.call(m))),t=void 0===t?"":u(t),e=void 0===e?"":u(e),m=t,y&&"dotAll"in $&&(o=!!e&&e.indexOf("s")>-1,o&&(e=e.replace(/s/g,""))),i=e,A&&"sticky"in $&&(a=!!e&&e.indexOf("y")>-1,a&&(e=e.replace(/y/g,""))),w&&(n=j(t),t=n[0],b=n[1]),c=r(_(t,e),h?this:C,T),(o||a||b.length)&&(l=g(c),o&&(l.dotAll=!0,l.raw=T(B(t),i)),a&&(l.sticky=!0),b.length&&(l.groups=b)),t!==m)try{s(c,"source",""===m?"(?:)":m)}catch(k){}return c},E=function(t){t in T||c(T,t,{configurable:!0,get:function(){return _[t]},set:function(e){_[t]=e}})},R=l(_),q=0;R.length>q;)E(R[q++]);C.constructor=T,T.prototype=C,p(a,"RegExp",T)}m("RegExp")},"4df4":function(t,e,i){"use strict";var o=i("0366"),a=i("7b0b"),n=i("9bdd"),r=i("e95a"),s=i("50c4"),c=i("8418"),l=i("35a1");t.exports=function(t){var e,i,d,u,f,h,p=a(t),v="function"==typeof this?this:Array,b=arguments.length,g=b>1?arguments[1]:void 0,m=void 0!==g,k=l(p),y=0;if(m&&(g=o(g,b>2?arguments[2]:void 0,2)),void 0==k||v==Array&&r(k))for(e=s(p.length),i=new v(e);e>y;y++)h=m?g(p[y],y):p[y],c(i,y,h);else for(u=k.call(p),f=u.next,i=new v;!(d=f.call(u)).done;y++)h=m?n(u,g,[d.value,y],!0):d.value,c(i,y,h);return i.length=y,i}},5108:function(t,e,i){"use strict";i("08d3")},"5a34":function(t,e,i){var o=i("44e7");t.exports=function(t){if(o(t))throw TypeError("The method doesn't accept regular expressions");return t}},7730:function(t,e,i){},"943d":function(t,e,i){"use strict";i("bfe2")},"9bdd":function(t,e,i){var o=i("825a"),a=i("2a62");t.exports=function(t,e,i,n){try{return n?e(o(i)[0],i[1]):e(i)}catch(r){throw a(t),r}}},a630:function(t,e,i){var o=i("23e7"),a=i("4df4"),n=i("1c7e"),r=!n((function(t){Array.from(t)}));o({target:"Array",stat:!0,forced:r},{from:a})},ab13:function(t,e,i){var o=i("b622"),a=o("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[a]=!1,"/./"[t](e)}catch(o){}}return!1}},aec6:function(t,e,i){"use strict";i("7730")},b0c0:function(t,e,i){var o=i("83ab"),a=i("9bf2").f,n=Function.prototype,r=n.toString,s=/^\s*function ([^ (]*)/,c="name";o&&!(c in n)&&a(n,c,{configurable:!0,get:function(){try{return r.call(this).match(s)[1]}catch(t){return""}}})},be79:function(t,e,i){"use strict";(function(t){var o=i("2909"),a=(i("a4d3"),i("e01a"),i("99af"),i("4de4"),i("d81d"),i("159b"),i("4d63"),i("ac1f"),i("25f0"),i("5319"),i("2ca0"),i("c7f8")),n=i("c470"),r=i("4e1b"),s=i("4729"),c=i("5de6"),l=i("365c"),d=i("fa7d"),u=i("101f"),f=i("e8ec"),h=i("a211");t.ePub=h["a"],e["a"]={components:{DetailTitle:a["a"],Scroll:r["a"],BookInfo:n["a"],Toast:s["a"]},computed:{desc:function(){return this.description?this.description.substring(0,100):""},flatNavigation:function(){return this.navigation?Array.prototype.concat.apply([],Array.prototype.concat.apply([],this.doFlatNavigation(this.navigation.toc))):[]},lang:function(){return this.metadata?this.metadata.language:"-"},isbn:function(){return this.metadata?this.metadata.identifier:"-"},publisher:function(){return this.metadata?this.metadata.publisher:"-"},title:function(){return this.metadata?this.metadata.title:""},author:function(){return this.metadata?this.metadata.creator:""},inBookShelf:function(){var t=this;if(this.bookItem&&this.bookShelf){var e=function t(e){var i;return(i=[]).concat.apply(i,Object(o["a"])(e.map((function(e){return e.itemList?[e].concat(Object(o["a"])(t(e.itemList))):e}))))}(this.bookShelf).filter((function(t){return 1===t.type})),i=e.filter((function(e){return e.fileName===t.bookItem.fileName}));return i&&i.length>0}return!1}},data:function(){return{bookShelf:null,bookItem:null,book:null,metadata:null,trialRead:null,cover:null,navigation:null,displayed:!1,audio:null,randomLocation:null,description:null,toastText:"",trialText:null,categoryText:null,opf:null}},methods:{addOrRemoveShelf:function(){this.inBookShelf?Object(c["k"])(this.bookItem):Object(c["c"])(this.bookItem),this.bookShelf=Object(f["f"])("bookShelf")},showToast:function(t){this.toastText=t,this.$refs.toast.show()},readBook:function(){var t=this;Object(u["b"])(this.bookItem.fileName,(function(e,i){!e&&i instanceof Blob?t.$router.push({path:"/ebook/".concat(t.bookItem.fileName)}):t.$router.push({path:"/ebook/".concat(t.bookItem.fileName),query:{opf:t.opf}})}))},trialListening:function(){var t=this;Object(u["b"])(this.bookItem.fileName,(function(e,i){!e&&i instanceof Blob?t.$router.push({path:"/book-store/book-speaking",query:{fileName:t.bookItem.fileName}}):t.$router.push({path:"/book-store/book-speaking",query:{fileName:t.bookItem.fileName,opf:t.opf}})}))},read:function(t){var e=this;Object(u["b"])(this.bookItem.fileName,(function(i,o){!i&&o instanceof Blob?e.$router.push({path:"/ebook/".concat(e.bookItem.fileName),query:{navigation:t.href}}):e.$router.push({path:"/ebook/".concat(e.bookItem.fileName),query:{navigation:t.href,opf:e.opf}})}))},itemStyle:function(t){return{marginLeft:(t.deep-1)*Object(d["c"])(20)+"rem"}},doFlatNavigation:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=[];return t.forEach((function(t){t.deep=i,o.push(t),t.subitems&&t.subitems.length>0&&o.push(e.doFlatNavigation(t.subitems,i+1))})),o},initBook:function(){var t=this;this.bookItem&&Object(u["b"])(this.bookItem.fileName,(function(e,i){e?t.downloadBook():i?t.parseBook(i):t.downloadBook()}))},downloadBook:function(){var t="".concat("http://47.99.166.157/epub","/").concat(this.bookItem.categoryText,"/").concat(this.bookItem.fileName,"/OEBPS/package.opf");this.parseBook(t)},parseBook:function(t){var e=this;this.book=new h["a"](t),this.book.loaded.metadata.then((function(t){e.metadata=t})),this.book.loaded.navigation.then((function(t){e.navigation=t,e.navigation.toc&&e.navigation.toc.length>1&&e.display(e.navigation.toc[1].href).then((function(t){e.$refs.scroll&&e.$refs.scroll.refresh(),e.displayed=!0;var i=new RegExp("<.+?>","g"),o=t.output.replace(i,"").replace(/\s\s/g,"");e.description=o}))}))},findBookFromList:function(t){var e=this;Object(l["c"])().then((function(i){if(200===i.status){var o=i.data.data.filter((function(e){return e.fileName===t}));o&&o.length>0&&(e.bookItem=o[0],console.log(e.bookItem),e.initBook())}}))},init:function(){var t=this,e=this.$route.query.fileName;this.categoryText=this.$route.query.category,e&&Object(l["a"])({fileName:e}).then((function(i){if(200===i.status&&0===i.data.error_code&&i.data.data){var o=i.data.data;t.bookItem=o,t.cover=t.bookItem.cover;var a=o.rootFile;a.startsWith("/")&&(a=a.substring(1,a.length)),t.opf="".concat("http://47.99.166.157/epub2","/").concat(e,"/").concat(a),t.parseBook(t.opf)}else t.showToast(i.data.msg)})),this.bookShelf=Object(f["f"])("bookShelf")},back:function(){this.$router.go(-1)},display:function(t){if(this.$refs.preview)return this.rendition||(this.rendition=this.book.renderTo("preview",{width:window.innerWidth>640?640:window.innerWidth,height:window.innerHeight,method:"default"})),t?this.rendition.display(t):this.rendition.display()},onScroll:function(t){t>Object(d["d"])(42)?this.$refs.title.showShadow():this.$refs.title.hideShadow()}},mounted:function(){this.init()}}}).call(this,i("c8ba"))},bfe2:function(t,e,i){},c470:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cover-title-wrapper"},[i("div",{staticClass:"cover-title-left-wrapper"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.cover,expression:"cover"}],staticClass:"cover-img"})]),i("div",{staticClass:"cover-title-right-wrapper"},[i("div",{staticClass:"detail-cover-title-wrapper"},[i("div",{staticClass:"cover-title-text"},[t._v(t._s(t.title))])]),i("div",{staticClass:"cover-author-wrapper"},[i("div",{staticClass:"cover-author-text"},[t._v(t._s(t.author))])]),i("div",{staticClass:"detail-cover-description-wrapper"},[i("div",{staticClass:"detail-cover-description-text"},[t._v(t._s(t.desc))])])])])},a=[],n={props:{cover:String,title:String,author:String,desc:String}},r=n,s=(i("943d"),i("2877")),c=Object(s["a"])(r,o,a,!1,null,"6d62251c",null);e["a"]=c.exports},c7f8:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail-title-wrapper",class:{"hide-shadow":t.ifHideShadow}},[i("div",{staticClass:"title-left-wrapper",on:{click:t.back}},[i("span",{staticClass:"icon-back"})]),i("div",{staticClass:"title-right-wrapper"},[t.showShelf?i("span",{staticClass:"icon-shelf icon",on:{click:t.showBookShelf}}):i("span",{staticClass:"icon-share"})]),t.title?i("div",{staticClass:"title-text"},[t._v(" "+t._s(t.title)+" ")]):t._e()])},a=[],n={props:{title:String,showShelf:{type:Boolean,default:!0}},data:function(){return{ifHideShadow:!0}},methods:{showBookShelf:function(){this.$router.push("/book-store/shelf")},showShadow:function(){this.ifHideShadow=!1},hideShadow:function(){this.ifHideShadow=!0},back:function(){this.$emit("back")}}},r=n,s=(i("aec6"),i("2877")),c=Object(s["a"])(r,o,a,!1,null,"4801840a",null);e["a"]=c.exports},d28b:function(t,e,i){var o=i("746f");o("iterator")},d81d:function(t,e,i){"use strict";var o=i("23e7"),a=i("b727").map,n=i("1dde"),r=n("map");o({target:"Array",proto:!0,forced:!r},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},ddb0:function(t,e,i){var o=i("da84"),a=i("fdbc"),n=i("e260"),r=i("9112"),s=i("b622"),c=s("iterator"),l=s("toStringTag"),d=n.values;for(var u in a){var f=o[u],h=f&&f.prototype;if(h){if(h[c]!==d)try{r(h,c,d)}catch(v){h[c]=d}if(h[l]||r(h,l,u),a[u])for(var p in n)if(h[p]!==n[p])try{r(h,p,n[p])}catch(v){h[p]=n[p]}}}},fb6a:function(t,e,i){"use strict";var o=i("23e7"),a=i("861d"),n=i("e8b5"),r=i("23cb"),s=i("50c4"),c=i("fc6a"),l=i("8418"),d=i("b622"),u=i("1dde"),f=u("slice"),h=d("species"),p=[].slice,v=Math.max;o({target:"Array",proto:!0,forced:!f},{slice:function(t,e){var i,o,d,u=c(this),f=s(u.length),b=r(t,f),g=r(void 0===e?f:e,f);if(n(u)&&(i=u.constructor,"function"!=typeof i||i!==Array&&!n(i.prototype)?a(i)&&(i=i[h],null===i&&(i=void 0)):i=void 0,i===Array||void 0===i))return p.call(u,b,g);for(o=new(void 0===i?Array:i)(v(g-b,0)),d=0;b<g;b++,d++)b in u&&l(o,d,u[b]);return o.length=d,o}})}}]);
//# sourceMappingURL=chunk-3c0dfd15.652ac2f9.js.map